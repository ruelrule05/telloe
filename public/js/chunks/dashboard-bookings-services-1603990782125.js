(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"4++5":function(e,t,i){(t=i("JPst")(!1)).push([e.i,".multiline-ellipsis[data-v-579d3ee0]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.service-container[data-v-579d3ee0]{width:33.333%}.service[data-v-579d3ee0]{border:solid 1px transparent;transition:all .1s ease-in-out}.service[data-v-579d3ee0]:hover:not(.active){border-color:#ced4da}.service.active[data-v-579d3ee0]{box-shadow:0 0 0 .1rem #5a5adf}.service.unavailable[data-v-579d3ee0]{opacity:.45}.service-add[data-v-579d3ee0]{background-color:#f0f2f5;transition:all .1s ease-in-out;border:dashed 1px #adb5bd}.service-add[data-v-579d3ee0]:hover{background-color:#fff}.badge-day[data-v-579d3ee0]{width:25px;height:25px}.service-day .chevron-down[data-v-579d3ee0]{fill:#adb5bd;transition:all .1s ease-in-out}.service-day .service-day-heading[aria-expanded=true] svg[data-v-579d3ee0]{transform:rotate(-180deg);fill:#000}.service-day .service-day-heading:hover svg[data-v-579d3ee0]{fill:#000}.service-description[data-v-579d3ee0]{height:34px}",""]),e.exports=t},HqZr:function(e,t,i){var a=i("4++5");"string"==typeof a&&(a=[[e.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(e.exports=a.locals)},Q66v:function(e,t,i){"use strict";var a=i("HqZr");i.n(a).a},"T/Hn":function(e,t,i){"use strict";i.r(t);var a=i("XuX8"),s=i.n(a),r=i("L2JU"),n=i("jBWl"),c=i("5cWj"),l=i("p2YT"),o=i("MCve"),d=i("4m4z"),v=i("NalG"),u=i("Zha+"),m=i("cmxz"),b=i("GINL"),p=i("grtR"),h=i("XPXJ"),f=i("WIcW"),y=i.n(f),w=i("Wgwc"),_=i.n(w);function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){C(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}s.a.use(y.a);var k={components:{Modal:n.a,VueFormValidate:o.a,VueCheckbox:d.a,PencilIcon:v.a,ChevronDownIcon:u.a,PlusIcon:m.a,CogIcon:b.a,TrashIcon:p.a,ClockIcon:h.a,ToggleSwitch:c.a,Timerangepicker:l.a},data:function(){return{newService:{},selectedService:null,days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],newBreaktime:null,newHoliday:null,serviceDetailsTab:"availability",selectedDay:""}},computed:S(S({},Object(r.d)({ready:function(e){return e.services.ready},services:function(e){return e.services.index}})),{},{formattedHolidays:function(){var e=[];return this.selectedService&&this.selectedService.holidays.forEach((function(t){var i=t.split("-"),a=new Date(i[0],i[1]-1,i[2]);e.push(a)})),e}}),watch:{ready:function(e){this.$root.contentloading=!e},selectedService:function(e){var t=this;this.$root.intros.add_service.enabled&&setTimeout((function(){document.querySelector(".introjs-overlay")||t.$root.introJS.start().goToStepNumber(t.$root.intros.add_service.step)}),500)}},created:function(){this.getServices(),this.$root.contentloading=!this.ready},mounted:function(){},methods:S(S({},Object(r.b)({getServices:"services/index",storeService:"services/store",updateService:"services/update",deleteService:"services/delete"})),{},{applyBreaktimeToAll:function(){var e=this;this.selectedService&&this.selectedDay&&(this.$refs.applyBreaktimeToAllModal.hide(),this.$toasted.show("Breaktimes has been applied to all days successfully."),Object.keys(this.selectedService.days).forEach((function(t){t!=e.selectedDay&&(e.selectedService.days[t].breaktimes=e.selectedService.days[e.selectedDay].breaktimes)})),this.updateService(this.selectedService))},removeHoliday:function(e){this.$delete(this.selectedService.holidays,e),this.updateService(this.selectedService)},addHoliday:function(){if(this.newHoliday&&this.newHoliday.date){this.selectedService.holidays||this.$set(this.selectedService,"holidays",[]);var e=_()(this.newHoliday.date).format("YYYY-MM-DD");this.selectedService.holidays.push(e),this.newHoliday=null,this.updateService(this.selectedService)}},removeBreaktime:function(e,t){this.$delete(this.selectedService.days[t].breaktimes,e),this.updateService(this.selectedService)},updateBreaktime:function(e,t,i){this.selectedService.days[i].breaktimes[t].start=e.start.time,this.selectedService.days[i].breaktimes[t].end=e.end.time,this.updateService(this.selectedService)},updateNewBreaktime:function(e,t){this.$set(this.newBreaktime,"start",(e.start||{}).time),this.$set(this.newBreaktime,"end",(e.end||{}).time),this.newBreaktime.start&&this.newBreaktime.end&&(this.selectedService.days[t].breaktimes||this.$set(this.selectedService.days[t],"breaktimes",[]),this.selectedService.days[t].breaktimes.push(this.newBreaktime),this.newBreaktime=null,this.updateService(this.selectedService))},updateAvailableHours:function(e,t){this.selectedService&&(this.$set(this.selectedService.days[t],"start",e.start.time),this.$set(this.selectedService.days[t],"end",e.end.time),this.updateService(this.selectedService))},submit:function(){this.newService.id?(this.selectedService.name=this.newService.name,this.selectedService.description=this.newService.description,this.selectedService.duration=this.newService.duration,this.selectedService.interval=this.newService.interval,this.selectedService.default_rate=this.newService.default_rate,this.selectedService.in_widget=this.newService.in_widget,this.updateService(this.selectedService),this.$refs.editModal.hide()):this.store()},store:function(){var e={};if(this.days.forEach((function(t){var i="Sunday"!=t&&"Saturday"!=t;e[t]={isOpen:i,start:"08:00",end:"17:00"}})),this.newService.days=e,this.newService.name&&this.newService.description){this.$refs.addModal.hide();var t=JSON.parse(JSON.stringify(this.newService));this.storeService(t)}},formatDate:function(e){return _()(e).format("MMMM D, YYYY")}})},x=(i("Q66v"),i("KHd+")),$=Object(x.a)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row h-100"},[e.ready?i("div",{staticClass:"col-md-12 h-100 d-flex flex-column"},[i("div",{staticClass:"border-bottom bg-white p-3 d-flex align-items-center"},[i("h5",{staticClass:"font-heading mb-0"},[e._v("Services")]),e._v(" "),i("div",{staticClass:"ml-auto d-flex align-items-center"},[i("button",{staticClass:"btn btn-light shadow-none d-flex align-items-center",attrs:{"data-intro":e.$root.intros.add_service.intro,"data-step":e.$root.intros.add_service.step,type:"button"},on:{click:function(t){e.newService={},e.$refs.addModal.show()}}},[i("plus-icon",{staticClass:"btn-icon"}),e._v("\n          Add Service\n        ")],1)])]),e._v(" "),0==e.services.length?i("div",{staticClass:"py-5 text-center p-2 position-absolute-center"},[i("h6",{staticClass:"text-grayer mb-3 font-weight-light h5 text-secondary"},[e._v("\n        You don't have any services added yet\n      ")]),e._v(" "),i("button",{staticClass:"btn btn-primary",on:{click:function(t){e.newService={},e.$refs.addModal.show()}}},[e._v("\n        Add Service\n      ")])]):i("div",{staticClass:"d-flex flex-grow-1 overflow-hidden"},[i("div",{staticClass:"flex-grow-1 p-2 overflow-auto"},[i("div",{staticClass:"d-flex flex-wrap"},e._l(e.services,(function(t){return i("div",{key:t.id,staticClass:"service-container p-3"},[i("router-link",{staticClass:"cursor-pointer",attrs:{to:"/dashboard/bookings/services/"+t.id,tag:"div"}},[i("div",{staticClass:"bg-white service rounded p-3",class:[t==e.selectedService?"active":"shadow-sm",{unavailable:!t.is_available}]},[i("div",{staticClass:"d-flex"},[i("h5",{staticClass:"font-heading mb-3"},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.parent_service_id?i("span",{staticClass:"d-block text-secondary font-size-base font-weight-normal"},[e._v("ASSIGNED")]):e._e()]),e._v(" "),i("toggle-switch",{staticClass:"ml-auto",attrs:{"active-class":"bg-green"},on:{input:function(i){return e.updateService(t)}},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.is_available,callback:function(i){e.$set(t,"is_available",i)},expression:"service.is_available"}})],1),e._v(" "),i("p",{staticClass:"text-secondary mb-0 multiline-ellipsis service-description mb-5"},[e._v("\n                  "+e._s(t.description)+"\n                ")]),e._v(" "),i("div",{staticClass:"d-flex align-items-center mt-3"},[i("clock-icon",{attrs:{width:"17",height:"17",fill:"#888"}}),e._v(" "),i("span",{staticClass:"ml-1"},[e._v(e._s(t.duration)+" minutes")])],1),e._v(" "),i("div",{staticClass:"d-flex mt-2"},e._l(e.days,(function(a,s){return i("div",{key:s,staticClass:"badge-day mr-1 rounded-circle position-relative overflow-hidden",class:[t.days[a].isOpen?"text-white bg-primary":"text-gray-400 bg-gray-200"]},[i("span",{staticClass:"position-absolute-center line-height-1"},[e._v(e._s(a.charAt(0)))])])})),0)])])],1)})),0)]),e._v(" "),i("div",{staticClass:"info bg-white border-left py-4 h-100 position-relative overflow-auto",class:{open:e.selectedService}},[e.selectedService?i("div",[i("div",{staticClass:"px-4 mb-5"},[i("div",{staticClass:"d-flex align-items-center mb-1"},[i("h5",{staticClass:"font-heading mb-0"},[e._v(e._s(e.selectedService.name))]),e._v(" "),i("div",{staticClass:"ml-auto d-flex align-items-center"},[i("toggle-switch",{attrs:{"active-class":"bg-green"},on:{input:function(t){return e.updateService(e.selectedService)}},model:{value:e.selectedService.is_available,callback:function(t){e.$set(e.selectedService,"is_available",t)},expression:"selectedService.is_available"}})],1)]),e._v(" "),i("p",{staticClass:"mb-0 mt-2 small text-secondary"},[e._v("\n              "+e._s(e.selectedService.description)+"\n            ")])]),e._v(" "),i("div",{staticClass:"px-4"},[i("h6",{staticClass:"font-heading d-inline-block mb-2"},[e._v("Duration:")]),e._v("\n            "+e._s(e.selectedService.duration)+" minutes\n            "),i("div",[i("h6",{staticClass:"font-heading d-inline-block mb-2"},[e._v("Interval:")]),e._v("\n              "+e._s(e.selectedService.interval)+" minutes\n            ")]),e._v(" "),i("h6",{staticClass:"font-heading d-inline-block mb-2"},[e._v("Default Rate:")]),e._v("\n            $"+e._s(e.selectedService.default_rate)+"\n            "),i("div",[i("h6",{staticClass:"font-heading d-inline-block mb-4"},[e._v("\n                Available in widget:\n              ")]),e._v("\n              "+e._s(e.selectedService.in_widget?"Yes":"No")+"\n            ")])]),e._v(" "),i("div",{staticClass:"d-flex mb-2"},[i("button",{staticClass:"btn position-relative w-50 rounded-0 py-3",class:["availability"==e.serviceDetailsTab?"btn-primary":"btn-light"],attrs:{"data-intro":e.$root.intros.service_availability.intro,"data-step":e.$root.intros.service_availability.step},on:{click:function(t){e.serviceDetailsTab="availability"}}},[e._v("\n              Availability\n            ")]),e._v(" "),i("button",{staticClass:"btn btn-tab position-relative w-50 rounded-0 py-3",class:["holidays"==e.serviceDetailsTab?"btn-primary":"btn-light"],attrs:{"data-intro":e.$root.intros.service_holidays.intro,"data-step":e.$root.intros.service_holidays.step},on:{click:function(t){e.serviceDetailsTab="holidays"}}},[e._v("\n              Holidays\n            ")])]),e._v(" "),"availability"==e.serviceDetailsTab?i("div",{attrs:{id:"service-days"}},e._l(e.days,(function(t,a){return i("div",{key:a,staticClass:"service-day p-2 border-bottom"},[i("div",{staticClass:"service-day-heading py-2 px-3 d-flex align-items-center cursor-pointer",attrs:{"data-toggle":"collapse","data-target":"#day-"+t}},[i("toggle-switch",{staticClass:"mr-2",attrs:{"active-class":"bg-green"},on:{input:function(t){return e.updateService(e.selectedService)}},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:e.selectedService.days[t].isOpen,callback:function(i){e.$set(e.selectedService.days[t],"isOpen",i)},expression:"selectedService.days[day].isOpen"}}),e._v(" "),i("div",{staticClass:"h6 mb-0"},[e._v(e._s(t.toUpperCase()))]),e._v(" "),i("chevron-down-icon",{staticClass:"ml-auto chevron-down"})],1),e._v(" "),i("div",{staticClass:"collapse",attrs:{"data-parent":"#service-days",id:"day-"+t}},[i("div",{staticClass:"py-2 px-3"},[i("div",{},[i("label",{staticClass:"mb-1 text-gray"},[e._v("Available Time")]),e._v(" "),i("timerangepicker",{attrs:{start:e.selectedService.days[t].start,end:e.selectedService.days[t].end},on:{update:function(i){return e.updateAvailableHours(i,t)}}}),e._v(" "),i("label",{staticClass:"mb-1 mt-3 text-gray"},[e._v("Break Times")]),e._v(" "),e._l(e.selectedService.days[t].breaktimes,(function(a,s){return i("div",{key:s,staticClass:"d-flex align-items-center mb-1"},[i("timerangepicker",{staticClass:"flex-grow-1",attrs:{start:a.start,end:a.end},on:{update:function(i){return e.updateBreaktime(i,s,t)}}}),e._v(" "),i("trash-icon",{staticClass:"ml-auto cursor-pointer",attrs:{width:"20",height:"20",fill:"red"},nativeOn:{click:function(i){return e.removeBreaktime(s,t)}}})],1)})),e._v(" "),e.newBreaktime?i("timerangepicker",{staticClass:"mt-1",attrs:{start:e.newBreaktime.start,end:e.newBreaktime.end},on:{update:function(i){return e.updateNewBreaktime(i,t)}}}):e._e(),e._v(" "),i("div",{staticClass:"mt-2 d-flex align-items-center"},[i("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:e.newBreaktime&&(!e.newBreaktime.start||!e.newBreaktime.end)},on:{click:function(t){e.newBreaktime={}}}},[e._v("\n                        + Add breaktime\n                      ")]),e._v(" "),(e.selectedService.days[t].breaktimes||[]).length>0?i("button",{staticClass:"btn btn-white border btn-sm ml-auto",attrs:{type:"button"},on:{click:function(i){e.selectedDay=t,e.$refs.applyBreaktimeToAllModal.show()}}},[e._v("\n                        Apply to all days\n                      ")]):e._e()])],2)])])])})),0):"holidays"==e.serviceDetailsTab?i("div",{staticClass:"mt-3 px-3"},[i("button",{staticClass:"btn btn-sm btn-outline-primary mb-2",on:{click:function(t){e.newHoliday={}}}},[e._v("\n              + Add Holiday\n            ")]),e._v(" "),e.newHoliday?i("div",[i("div",{staticClass:"d-flex border rounded align-items-stretch mb-2 overflow-hidden"},[i("div",{staticClass:"text-gray bg-gray-300 p-2"},[e._v("Date")]),e._v(" "),i("div",{staticClass:"flex-grow-1"},[i("v-date-picker",{staticClass:"d-block h-100",attrs:{"is-required":"","disabled-dates":e.formattedHolidays,"min-date":new Date,popover:{visibility:"click"}},model:{value:e.newHoliday.date,callback:function(t){e.$set(e.newHoliday,"date",t)},expression:"newHoliday.date"}},[i("button",{staticClass:"btn btn-white rounded-0 btn-block shadow-none border-0 h-100",class:{"text-gray":!e.newHoliday.date},attrs:{type:"button"}},[e._v("\n                      "+e._s(e.newHoliday.date?e.formatDate(e.newHoliday.date):"Set date")+"\n                    ")])])],1)]),e._v(" "),i("div",{staticClass:"d-flex align-items-center mt-1"},[i("div",{staticClass:"ml-auto"},[i("button",{staticClass:"btn btn-sm btn-link text-body pl-0",attrs:{type:"button"},on:{click:function(t){e.newHoliday=null}}},[e._v("\n                    Cancel\n                  ")]),e._v(" "),i("button",{staticClass:"btn btn-sm btn-primary ml-auto",attrs:{type:"button",disabled:!e.newHoliday.date},on:{click:e.addHoliday}},[e._v("\n                    Add\n                  ")])])])]):e._e(),e._v(" "),i("div",e._l(e.selectedService.holidays,(function(t,a){return i("div",{key:a,staticClass:"border-bottom py-2 d-flex"},[e._v("\n                "+e._s(e.formatDate(t))+"\n                "),i("trash-icon",{staticClass:"ml-auto cursor-pointer",attrs:{width:"20",height:"20",fill:"red"},nativeOn:{click:function(t){return e.removeHoliday(a)}}})],1)})),0)]):e._e()]):i("div",{staticClass:"position-absolute-center text-gray text-center w-100"},[e._v("\n          Please select a service\n        ")])])])]):e._e(),e._v(" "),i("modal",{ref:"addModal",attrs:{"close-button":!1}},[i("h5",{staticClass:"font-heading mb-3"},[e._v("Add Service")]),e._v(" "),i("vue-form-validate",{on:{submit:e.submit}},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Service name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.name,expression:"newService.name"}],staticClass:"form-control",attrs:{type:"text","data-required":""},domProps:{value:e.newService.name},on:{input:function(t){t.target.composing||e.$set(e.newService,"name",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Description")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newService.description,expression:"newService.description"}],staticClass:"form-control resize-none",attrs:{"data-required":"",rows:"3"},domProps:{value:e.newService.description},on:{input:function(t){t.target.composing||e.$set(e.newService,"description",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Duration (in minutes)")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.duration,expression:"newService.duration"}],staticClass:"form-control",attrs:{type:"number","data-required":""},domProps:{value:e.newService.duration},on:{input:function(t){t.target.composing||e.$set(e.newService,"duration",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Interval (in minutes)")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.interval,expression:"newService.interval"}],staticClass:"form-control",attrs:{type:"number",onkeydown:"if(event.key==='.'){event.preventDefault();}",placeholder:"Defaults to 15 mins"},domProps:{value:e.newService.interval},on:{input:function(t){t.target.composing||e.$set(e.newService,"interval",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Default Rate")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.default_rate,expression:"newService.default_rate"}],staticClass:"form-control",attrs:{type:"number",step:"0.01",placeholder:"$0.00"},domProps:{value:e.newService.default_rate},on:{input:function(t){t.target.composing||e.$set(e.newService,"default_rate",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"form-group"},[i("vue-checkbox",{attrs:{label:"Available in widget"},model:{value:e.newService.in_widget,callback:function(t){e.$set(e.newService,"in_widget",t)},expression:"newService.in_widget"}})],1),e._v(" "),i("div",{staticClass:"d-flex align-items-center"},[i("button",{staticClass:"btn btn-white border mr-1",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n          Cancel\n        ")]),e._v(" "),i("button",{staticClass:"ml-auto btn btn-primary",attrs:{type:"submit"}},[e._v("Add")])])])],1)],1)}),[],!1,null,"579d3ee0",null);t.default=$.exports}}]);