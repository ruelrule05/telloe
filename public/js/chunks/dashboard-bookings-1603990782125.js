(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"375c":function(t,e,s){"use strict";var n={name:"more-h"},i=s("KHd+"),o=Object(i.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M 6 10 A 2 2 0 0 0 4 12 A 2 2 0 0 0 6 14 A 2 2 0 0 0 8 12 A 2 2 0 0 0 6 10 z M 12 10 A 2 2 0 0 0 10 12 A 2 2 0 0 0 12 14 A 2 2 0 0 0 14 12 A 2 2 0 0 0 12 10 z M 18 10 A 2 2 0 0 0 16 12 A 2 2 0 0 0 18 14 A 2 2 0 0 0 20 12 A 2 2 0 0 0 18 10 z"}})])}),[],!1,null,null,null);e.a=o.exports},"5u6M":function(t,e,s){"use strict";var n=s("Cw12");s.n(n).a},A2bC:function(t,e,s){"use strict";var n=s("sPWh");s.n(n).a},Cw12:function(t,e,s){var n=s("O0WM");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,i);n.locals&&(t.exports=n.locals)},MCve:function(t,e,s){"use strict";function n(t,e){var s;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){s=t[Symbol.iterator]()},n:function(){var t=s.next();return r=t.done,t},e:function(t){l=!0,a=t},f:function(){try{r||null==s.return||s.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}var o={data:function(){return{valid:!0}},mounted:function(){this.$emit("mounted")},methods:{submit:function(t){this.valid=!0;var e,s=n($(this.$refs.form).find("input, textarea, select"));try{for(s.s();!(e=s.n()).done;){var i=e.value;if(("password"!=i.type&&0==i.value.trim().length||"password"==i.type&&0==i.value.length)&&(i.getAttribute("required")||i.hasAttribute("data-required"))){i.value="",this.valid=!1;var o=i.getAttribute("data-parent");o?i.closest(o).focus():i.focus();break}"text"==i.type&&(i.value=i.value.trim())}}catch(t){s.e(t)}finally{s.f()}this.valid&&this.$emit("submit",t)}}},a=s("KHd+"),r=Object(a.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t._t("default")],2)}),[],!1,null,null,null);e.a=r.exports},O0WM:function(t,e,s){(e=s("JPst")(!1)).push([t.i,".modal-loader[data-v-e924f312]{z-index:100}.close[data-v-e924f312]{outline:0;padding:0 !important;margin:0 !important;position:absolute;top:5px !important;right:5px !important;float:none !important;z-index:2}",""]),t.exports=e},bcHF:function(t,e,s){"use strict";s.r(e);var n,i=s("Wgwc"),o=s.n(i),a=s("WIcW"),r=s.n(a),l=s("L2JU"),c=s("jBWl"),d=s("MCve"),u=s("375c");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){v(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function v(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var h={components:{VCalendar:r.a,Modal:c.a,VueFormValidate:d.a,MoreHIcon:u.a},data:function(){return{selectedBooking:null,selectedDate:null,selectedTimeslot:null,selectAttribute:{highlight:{fillMode:"solid",contentClass:"bg-primary"}},days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],step:1,error:""}},computed:m(m({},Object(l.d)({ready:function(t){return t.bookings.ready},bookings:function(t){return t.bookings.index}})),{},{formattedHolidays:function(){var t=this,e=[];if(this.selectedBooking.service){this.selectedBooking.service.holidays.forEach((function(t){var s=t.split("-"),n=new Date(s[0],s[1]-1,s[2]);e.push(n)}));var s=[];this.days.forEach((function(e,n){n++,t.selectedBooking.service.days[e].isOpen||s.push(n)})),s.length>0&&e.push({weekdays:s})}return e},nextDisabled:function(){var t=!0;switch(this.step){case 1:this.selectedDate&&(t=!1);break;case 2:this.selectedTimeslot&&(t=!1)}return t},buttonText:function(){var t="Next";switch(this.step){case 1:t="Select time";break;case 2:t="Update"}return t}}),watch:{ready:function(t){this.$root.contentloading=!t},selectedDate:function(t){t&&(this.error=null),this.getTimeslots()}},created:function(){this.$root.contentloading=!this.ready,this.getBookings()},methods:m(m({},Object(l.b)({getBookings:"bookings/index",updateBooking:"bookings/update"})),{},(n={resetStep:function(){this.step=1,this.selectedTimeslot=this.selectedDate=null},update:function(t){var e=this;if(t){var s=JSON.parse(JSON.stringify(t));s.date=o()(this.selectedDate).format("YYYY-MM-DD"),s.start=this.selectedTimeslot.time,this.updateBooking(s).then((function(){e.$refs.editModal.hide()})).catch((function(t){e.error=t.response.data.message,e.resetStep()}))}},formatDate:function(t){var e="";return t&&(e=o()(t).format("MMMM DD, YYYY")),e},nextStep:function(){this.nextDisabled||this.step++},edit:function(t){if(t){var e=t.date.split("-"),s=new Date(e[0],e[1]-1,e[2]);this.selectedBooking=t,this.selectedDate=s,this.$refs.editModal.show()}},getTimeslots:function(){var t=this;if(this.selectedBooking&&this.selectedDate){this.selectedTimeslot=null;var e=o()(this.selectedDate).format("YYYY-MM-DD");axios.get("/@".concat(this.selectedBooking.service.user.username,"/").concat(this.selectedBooking.service.id,"/timeslots?date=").concat(e)).then((function(s){var n=s.data;if(t.selectedBooking.date==e){var i=t.selectedBooking.start.split(":"),a={label:o()().hour(i[0]).minute(i[1]).format("hh:mmA"),time:t.selectedBooking.start};6==a.label.length&&(a.label="0".concat(a.label)),t.selectedTimeslot=a,n.push(a)}n=n.sort((function(t,e){return t.time>e.time?1:-1})),t.$set(t.selectedBooking.service,"timeslots",n)}))}}},v(n,"formatDate",(function(t){return o()(t).format("MMMM D, YYYY")})),v(n,"formatTime",(function(t){var e=t.split(":");return o()().set("hour",e[0]).set("minute",e[1]).format("hh:mmA")})),v(n,"destroy",(function(t){t&&(this.$refs.deleteModal.hide(),axios.delete("/dashboard/bookings/".concat(t.id)),this.$delete(this.bookings,this.bookings.findIndex((function(e){return e.id==t.id}))))})),n))},b=(s("A2bC"),s("KHd+")),p=Object(b.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100"},["customer"==t.$root.auth.role.role?s("div",{staticClass:"p-4"},[t.ready?s("div",[0==t.bookings.length?s("h6",{staticClass:"text-center text-gray position-absolute-center font-weight-lighter"},[t._v("\n\t\t\t\tYou don't have any bookings yet.\n\t\t\t")]):s("div",[s("h1",{staticClass:"font-heading h3 mb-3"},[t._v("Bookings")]),t._v(" "),s("table",{staticClass:"table table-borderless table-fixed-header mb-0"},[t._m(0),t._v(" "),s("tbody",t._l(t.bookings,(function(e){return s("tr",{key:e.vue},[s("td",{staticClass:"align-middle"},[s("strong",{staticClass:"d-block"},[t._v(t._s(e.service.name))]),t._v(" "),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(e.service.user.full_name))])]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v(t._s(t.formatDate(e.date)))]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v(t._s(t.formatTime(e.start)))]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v(t._s(t.formatTime(e.end)))]),t._v(" "),s("td",{staticClass:"text-right align-middle",staticStyle:{width:"50px"}},[s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn-white border p-1 line-height-0",attrs:{"data-toggle":"dropdown"}},[s("more-h-icon",{attrs:{width:"20",height:"20"}})],1),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[s("span",{staticClass:"dropdown-item d-flex align-items-center cursor-pointer",on:{click:function(s){return t.edit(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("span",{staticClass:"dropdown-item d-flex align-items-center cursor-pointer",on:{click:function(s){t.selectedBooking=e,t.$refs.deleteModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t")])])])])])})),0)])]),t._v(" "),s("modal",{ref:"editModal",on:{hidden:t.resetStep}},[t.selectedBooking?[s("h5",{staticClass:"font-heading"},[t._v("Edit Booking")]),t._v(" "),s("strong",{staticClass:"d-block"},[t._v(t._s(t.selectedBooking.service.name))]),t._v(" "),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(t.selectedBooking.service.user.full_name))]),t._v(" "),s("div",{staticClass:"mb-2 mt-4"},[t.error?s("div",{staticClass:"text-danger"},[t._v(t._s(t.error))]):[t.selectedDate?[s("strong",[t._v(t._s(t.formatDate(t.selectedDate)))]),t._v(" "),t.selectedTimeslot?s("span",[t._v("@"+t._s(t.selectedTimeslot.label))]):t._e()]:s("strong",[t._v("Select Date")])]],2),t._v(" "),s("vue-form-validate",{on:{submit:function(e){return t.update(t.selectedBooking)}}},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"rounded border h-100 mb-3 overflow-hidden"},[1==t.step?s("div",[s("v-date-picker",{staticClass:"v-calendar border-0",attrs:{"select-attribute":t.selectAttribute,"disabled-dates":t.formattedHolidays,"is-required":"","is-expanded":"","is-inline":"","min-date":new Date,"title-position":"left"},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1):2==t.step?s("div",{staticClass:"position-relative h-100 bg-light"},[0==(t.selectedBooking.service.timeslots||[]).length?s("div",{staticClass:"text-gray text-center position-absolute-center w-100"},[t._v("\n\t\t\t\t\t\t\t\t\t\tThere are no timeslots available for the selected date\n\t\t\t\t\t\t\t\t\t")]):s("div",{staticClass:"d-flex flex-wrap pb-2 pr-2"},t._l(t.selectedBooking.service.timeslots,(function(e){return s("div",{staticClass:"pt-2 pl-2 w-20"},[s("div",{staticClass:"btn btn-white border btn-block btn-timeslot px-0 text-center",class:{"bg-primary text-white":e==t.selectedTimeslot},on:{click:function(s){t.selectedTimeslot=e}}},[t._v(t._s(e.label))])])})),0)]):t._e()])]),t._v(" "),s("div",{staticClass:"d-flex mt-3"},[t.step>1?s("button",{staticClass:"btn btn-white border",attrs:{type:"button"},on:{click:function(e){t.step--}}},[t._v("Previous")]):t._e(),t._v(" "),1==t.step?s("button",{staticClass:"btn btn-primary ml-auto",attrs:{type:"button",disabled:t.nextDisabled},on:{click:function(e){return e.preventDefault(),t.nextStep()}}},[t._v("Select time")]):2==t.step?s("button",{staticClass:"btn btn-primary ml-auto",attrs:{type:"submit",disabled:t.nextDisabled}},[t._v("Update")]):t._e()])])]:t._e()],2),t._v(" "),s("modal",{ref:"deleteModal",attrs:{"close-button":!1}},[t.selectedBooking?[s("h5",{staticClass:"font-heading text-center"},[t._v("Delete Booking")]),t._v(" "),s("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\t\t\tAre you sure to delete the booking "),s("strong",[t._v(t._s(t.selectedBooking.service.name))]),t._v("? "),s("br"),t._v(" "),s("span",{staticClass:"text-danger"},[t._v("This action cannot be undone")])]),t._v(" "),s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-white border",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-danger ml-auto",attrs:{type:"button"},on:{click:function(e){return t.destroy(t.selectedBooking)}}},[t._v("Delete")])])]:t._e()],2)],1):t._e()]):s("router-view")],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"border-0"},[t._v("Service")]),t._v(" "),s("th",{staticClass:"border-0"},[t._v("Date")]),t._v(" "),s("th",{staticClass:"border-0"},[t._v("Start")]),t._v(" "),s("th",{staticClass:"border-0"},[t._v("End")]),t._v(" "),s("th",{staticClass:"border-0"})])])}],!1,null,null,null);e.default=p.exports},jBWl:function(t,e,s){"use strict";var n=s("o0o1"),i=s.n(n),o=s("/X8E"),a=s("MCve");function r(t,e,s,n,i,o,a){try{var r=t[o](a),l=r.value}catch(t){return void s(t)}r.done?e(l):Promise.resolve(l).then(n,i)}function l(t){return function(){var e=this,s=arguments;return new Promise((function(n,i){var o=t.apply(e,s);function a(t){r(o,n,i,a,l,"next",t)}function l(t){r(o,n,i,a,l,"throw",t)}a(void 0)}))}}var c={components:{CloseIcon:o.a,VueFormValidate:a.a},props:{closeButton:{type:Boolean,default:!0},form:{type:Boolean,default:!1},title:{type:String},loading:{type:Boolean,default:!1},size:{type:String,default:""},scrollable:{type:Boolean,default:!0}},computed:{contentComponent:function(){return this.form?"vue-form-validate":"div"},hasFooterSlot:function(){return!!this.$slots.footer}},mounted:function(){var t=this;$(this.$refs.modal).on("show.bs.modal",(function(){t.$emit("show")})),$(this.$refs.modal).on("shown.bs.modal",(function(){t.$emit("shown")})),$(this.$refs.modal).on("hide.bs.modal",(function(){t.$emit("hide")})),$(this.$refs.modal).on("hidden.bs.modal",(function(){t.$emit("hidden")}))},methods:{submit:function(){this.$emit("submit")},show:function(){var t=this;return l(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){$(t.$refs.modal).modal({keyboard:!1,backdrop:"static"}).modal("show"),setTimeout((function(){e()}),150)})));case 1:case"end":return e.stop()}}),e)})))()},hide:function(){var t=this;return l(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){$(t.$refs.modal).modal("hide"),setTimeout((function(){e()}),150)})));case 1:case"end":return e.stop()}}),e)})))()}}},d=(s("5u6M"),s("KHd+")),u=Object(d.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"modal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"}},[t.loading?s("div",{staticClass:"modal-loader position-absolute w-100 h-100"},[t._m(0)]):t._e(),t._v(" "),s("div",{staticClass:"modal-dialog modal-dialog-centered",class:[{"opacity-0":t.loading},t.size,{"modal-dialog-scrollable":t.scrollable}],attrs:{role:"document"}},[s(t.contentComponent,{tag:"component",staticClass:"modal-content",on:{submit:t.submit}},[t.closeButton?s("button",{staticClass:"btn p-0 btn-white badge-pill close position-absolute line-height-0",attrs:{type:"button","aria-label":"Close","data-dismiss":"modal"}},[s("close-icon",{attrs:{width:"28",height:"28"}})],1):t._e(),t._v(" "),t.title?s("div",{staticClass:"modal-header bg-light"},[s("h5",{staticClass:"modal-title font-heading"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),s("div",{staticClass:"modal-body position-relative"},[t._t("default")],2),t._v(" "),t.hasFooterSlot?s("div",{staticClass:"modal-footer bg-light"},[t._t("footer")],2):t._e()])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"position-absolute-center"},[e("div",{staticClass:"spinner-border text-white",attrs:{role:"status"}})])}],!1,null,"e924f312",null);e.a=u.exports},klEr:function(t,e,s){(e=s("JPst")(!1)).push([t.i,'.v-calendar .vc-title{font-family:"Avenir Next";font-size:18px}.v-calendar .vc-day-content{line-height:1}.form-body{height:270px}.w-20{width:20% !important}',""]),t.exports=e},sPWh:function(t,e,s){var n=s("klEr");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,i);n.locals&&(t.exports=n.locals)}}]);