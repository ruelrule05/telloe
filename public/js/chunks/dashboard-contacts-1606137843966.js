(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"/yFD":function(t,e,a){var s=a("dNBw");"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,n);s.locals&&(t.exports=s.locals)},"56ir":function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),n=a.n(s),i=a("L2JU"),o=a("jBWl"),c=a("KlRW"),r=a("dRai"),l=a("eeqt"),d=a("XPXJ"),u=a("grtR"),v=a("Wgwc"),m=a.n(v),f=a("RrSB"),p=a("UEn/"),h=a("WIcW"),g=a.n(h),_=a("5cWj"),C=a("MCve");function b(t,e,a,s,n,i,o){try{var c=t[i](o),r=c.value}catch(t){return void a(t)}c.done?e(r):Promise.resolve(r).then(s,n)}function w(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var i=t.apply(e,a);function o(t){b(i,s,n,o,c,"next",t)}function c(t){b(i,s,n,o,c,"throw",t)}o(void 0)}))}}function x(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?x(Object(a),!0).forEach((function(e){k(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function k(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var $=a("s3Wo"),F=a("i93w");m.a.extend($),m.a.extend(F);var O=a("xCJq");Vue.use(g.a);var P={components:{Modal:o.a,CheckmarkCircleIcon:c.a,MoreIcon:r.a,ArrowLeftIcon:l.a,ClockIcon:d.a,Paginate:f.a,VueSelect:p.a,TrashIcon:u.a,ToggleSwitch:_.a,VueFormValidate:C.a},data:function(){return{contact:null,clonedContact:null,filterServices:[],convertTime:O,dayjs:m.a,timeslots:[],newField:"",addField:!1}},computed:y(y({},Object(i.d)({services:function(t){return t.services.index}})),{},{servicesList:function(){var t=[];return this.services.forEach((function(e){t.push({text:e.name,value:e})})),t}}),watch:{},created:function(){this.getContact(),this.getServices()},mounted:function(){},methods:y(y({},Object(i.b)({getServices:"services/index",storeUserCustomFields:"user_custom_fields/store",updateContact:"contacts/update"})),{},{update:function(){this.updateContact(this.contact),this.$refs.editModal.hide()},toggleContactServiceBlacklist:function(t){var e=this.contact.blacklisted_services.findIndex((function(e){return e==t.id}));e>-1?this.contact.blacklisted_services.splice(e,1):this.contact.blacklisted_services.push(t.id)},getSelectedBookingNewTimeslots:function(t){var e=this;return w(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.timeslots[e.selectedTimeslot.dayName][e.selectedTimeslot.index]){a.next=6;break}return a.next=4,axios.get("/services/".concat(e.selectedService.id,"?date=").concat(m()(t).format("YYYY-MM-DD"),"&single=1"));case 4:s=a.sent,e.selectedTimeslot.timeslots=s.data;case 6:case"end":return a.stop()}}),a)})))()},formatDate:function(t){return m()(t).format("MMMM D, YYYY")},filterByServices:function(t){var e=this;return w(n.a.mark((function a(){var s,i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.map((function(t){return t.id})),a.next=3,axios.get("/contacts/".concat(e.contact.id,"?page=").concat(e.contact.bookings.current_page,"&services=").concat(s));case 3:i=a.sent,e.contact.bookings=i.data.bookings;case 5:case"end":return a.stop()}}),a)})))()},getData:function(t){var e=this;return w(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,axios.get("/contacts/".concat(e.contact.id,"?page=").concat(t));case 2:s=a.sent,e.contact.bookings=s.data.bookings;case 4:case"end":return a.stop()}}),a)})))()},getContact:function(){var t=this;return w(n.a.mark((function e(){var a,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/contacts/".concat(t.$route.params.id));case 2:a=e.sent,(s=a.data).upcoming_bookings.forEach((function(t){t.start=m()("".concat(t.date," ").concat(t.start)).toDate()})),t.contact=s,i=JSON.parse(JSON.stringify(a.data)),t.clonedContact=i,t.$root.contentloading=!1;case 9:case"end":return e.stop()}}),e)})))()},resendEmail:function(t){var e=this;this.resendLoading=!0,axios.post("/contacts/".concat(t.id,"/resend")).then((function(){e.resendLoading=!1,e.$refs.resendModal.hide(),e.$toasted.show("Invitation email has been sent successfully.")}))},toggleServiceBlacklist:function(t){var e=this.newContact.blacklisted_services.findIndex((function(e){return e==t.id}));e>-1?this.newContact.blacklisted_services.splice(e,1):this.newContact.blacklisted_services.push(t.id)},openFile:function(t){"file"==t.type?this.$root.downloadMedia(t):this.selectedFile=t},resetNewContact:function(){this.newContact={custom_fields:{},blacklisted_services:[]}},addNewField:function(){this.newField.trim().length>0&&(this.$root.auth.custom_fields.push(this.newField),this.newField="",this.addField=!1),this.storeUserCustomFields(),this.$toasted.show("Fields saved successfully.")},updateCustomField:function(t){this.$root.auth.custom_fields[t]=this.editCustomField,this.storeUserCustomFields(),this.$refs.customFieldsLabel.click()},store:function(){var t=this;this.newContact.email&&(this.storeContact(this.newContact).then((function(){t.newContact={custom_fields:{},blacklisted_services:[],sendToEmail:1}})),this.infoTab="")}})},j=(a("o4f0"),a("KHd+")),M=Object(j.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.contact?a("div",{staticClass:"w-100 h-100 overflow-hidden"},[a("div",{staticClass:"overflow-auto h-100"},[a("div",{staticClass:"p-4 d-flex align-items-center"},[a("button",{staticClass:"btn p-1 btn-white badge-pill shadow-sm",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/dashboard/contacts")}}},[a("arrow-left-icon",{attrs:{width:"30",height:"30"}})],1),t._v(" "),a("div",{staticClass:"dropdown ml-auto"},[a("button",{staticClass:"btn p-2 btn-white badge-pill shadow-sm",attrs:{"data-toggle":"dropdown","data-offset":"-130, 10"}},[a("more-icon",{attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.$refs.editModal.show()}}},[t._v("\n\t\t\t\t\t\tEdit\n\t\t\t\t\t")]),t._v(" "),a("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.$refs.deleteModal.show()}}},[t._v("\n\t\t\t\t\t\tDelete\n\t\t\t\t\t")])])])]),t._v(" "),a("div",{staticClass:"px-4"},[a("div",{staticClass:"row px-2 align-items-stretch"},[a("div",{staticClass:"col-md-5 px-2"},[a("div",{staticClass:"px-1"},[a("div",{staticClass:"rounded bg-white shadow-sm p-3 mb-4"},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"user-profile-image d-inline-block",style:{backgroundImage:"url("+t.contact.contact_user.profile_image+")"}},[t.contact.contact_user.profile_image?t._e():a("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.contact.contact_user.initials)+"\n\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("h1",{staticClass:"h3 font-heading mt-2 mb-0"},[t._v(t._s(t.contact.contact_user.full_name))]),t._v(" "),a("div",{staticClass:"text-muted mb-1"},[t._v(t._s(t.contact.contact_user.email))])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between mt-4"},[a("div",[a("div",{staticClass:"text-gray mb-1"},[t._v("Status")]),t._v(" "),a("div",[a("div",{staticClass:"badge badge-icon d-inline-flex align-items-center",class:[t.contact.is_pending?"bg-warning-light text-warning":"bg-primary-light text-primary"]},[t.contact.is_pending?a("clock-icon",{attrs:{height:"12",width:"12"}}):a("checkmark-circle-icon",{attrs:{height:"12",width:"12"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t "+t._s(t.contact.is_pending?"Pending":"Accepted")+"\n\t\t\t\t\t\t\t\t\t\t")],1)])]),t._v(" "),a("div",[a("div",{staticClass:"text-gray mb-1"},[t._v("Bookings")]),t._v(" "),a("div",[t._v(t._s(t.contact.bookings.total))])]),t._v(" "),a("div",[a("div",{staticClass:"text-gray mb-1"},[t._v("Date Added")]),t._v(" "),a("div",[t._v(t._s(t.formatDate(t.contact.created_at)))])])])]),t._v(" "),a("div",{staticClass:"rounded bg-white shadow-sm p-3 mb-4"},[t._m(0),t._v(" "),t._l(t.contact.custom_fields,(function(e,s){return a("div",{key:s,staticClass:"d-flex align-items-center custom-field position-relative"},[a("div",{staticClass:"mt-3 d-flex align-items-center w-100"},[a("span",{staticClass:"text-muted"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"ml-auto d-flex align-items-center"},[a("span",[t._v(t._s(e.value))]),t._v(" "),a("trash-icon",{staticClass:"cursor-pointer ml-1 d-none",attrs:{width:"18",height:"18"},nativeOn:{click:function(e){return t.$root.auth.custom_fields.splice(s,1)}}})],1)])])}))],2),t._v(" "),a("div",{staticClass:"rounded bg-white shadow-sm h-100 d-flex flex-column p-3"},[a("h5",{staticClass:"font-heading"},[t._v("Upcoming Bookings")]),t._v(" "),a("div",{staticClass:"flex-grow-1"},[t.contact.upcoming_bookings.length>0?t._l(t.contact.upcoming_bookings,(function(e){return a("div",{key:e.id,staticClass:"mt-3 pb-3 border-bottom"},[a("div",{staticClass:"h6 font-heading mb-0"},[t._v(t._s(e.service.name))]),t._v(" "),a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.formatDate(e.date))+" "+t._s(t.dayjs(e.start).format("hh:mmA"))+" -\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.dayjs(e.start).add(e.service.duration,"minute").format("hh:mmA"))+"\n\t\t\t\t\t\t\t\t\t\t")])])})):a("div",{staticClass:"py-3 text-center text-gray"},[t._v("No upcoming bookings")])],2)])])]),t._v(" "),a("div",{staticClass:"col-md-7 px-2"},[a("div",{staticClass:"px-1 h-100"},[a("div",{staticClass:"rounded bg-white shadow-sm p-3"},[a("div",{staticClass:"d-flex mb-2"},[a("h5",{staticClass:"font-heading mb-3"},[t._v("Bookings")]),t._v(" "),a("div",{staticClass:"ml-auto d-flex align-items-center"},[a("div",{staticClass:"d-inline-flex align-items-center"},[a("vue-select",{attrs:{options:t.servicesList,multiple:"",button_class:"border-0 bg-light shadow-none",label:"Services",placeholder:"All"},on:{input:t.filterByServices},model:{value:t.filterServices,callback:function(e){t.filterServices=e},expression:"filterServices"}})],1)])]),t._v(" "),t.contact.bookings.data.length>0?a("div",[a("table",{staticClass:"table table-borderless mb-0"},[a("tbody",{staticClass:" shadow-none"},[t._l(t.contact.bookings.data,(function(e){return[a("tr",{key:e.id},[a("td",{staticClass:"align-middle pl-0"},[t._v(t._s(e.service.name))]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.formatDate(e.date))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.convertTime(e.start,"hh:MMA"))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"align-middle pr-0"},[a("div",{staticClass:"flex-grow-1 text-right"},[a("div",{staticClass:"dropleft"},[a("button",{staticClass:"btn btn-white p-1 line-height-0",attrs:{"data-toggle":"dropdown"}},[a("more-icon",{staticClass:"fill-gray-500",attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-right"},[a("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(a){return t.editBooking(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])]}))],2)])]):a("div",{staticClass:"px-4 mb-4"},[a("div",{staticClass:"rounded bg-white shadow-sm text-center py-3 text-muted"},[t._v("\n\t\t\t\t\t\t\t\t\tNo bookings found.\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"mt-3 text-right"},[a("paginate",{attrs:{data:t.contact.bookings},on:{change:t.getData}})],1)])])])])]),t._v(" "),a("modal",{ref:"editModal",attrs:{"close-button":!1}},[a("h5",{staticClass:"font-heading mb-3"},[t._v("Edit Contact")]),t._v(" "),t.contact?a("vue-form-validate",{on:{submit:function(e){return t.update(t.contact)}}},[a("fieldset",{attrs:{disabled:!t.contact.is_pending}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.email,expression:"contact.email"}],staticClass:"form-control",attrs:{type:"email","data-required":""},domProps:{value:t.contact.email},on:{input:function(e){e.target.composing||t.$set(t.contact,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row form-group"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[t._v("First Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.first_name,expression:"contact.first_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.contact.first_name},on:{input:function(e){e.target.composing||t.$set(t.contact,"first_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[t._v("Last Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.last_name,expression:"contact.last_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.contact.last_name},on:{input:function(e){e.target.composing||t.$set(t.contact,"last_name",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("strong",{staticClass:"d-block mb-2 font-weight-bold"},[t._v("Available services")]),t._v(" "),t._l(t.services,(function(e){return a("div",{key:e.id,staticClass:"d-flex align-items-center mb-2 rounded p-3 bg-light"},[a("div",[a("h6",{staticClass:"font-heading mb-0"},[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"ml-auto"},[a("toggle-switch",{attrs:{"active-class":"bg-primary",value:!t.contact.blacklisted_services.find((function(t){return t==e.id}))},on:{input:function(a){return t.toggleContactServiceBlacklist(e,t.contact)}}})],1)])}))],2),t._v(" "),a("div",{staticClass:"d-flex mt-4"},[a("button",{staticClass:"btn btn-light shadow-none",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"ml-auto btn btn-primary",attrs:{type:"submit"}},[t._v("Update")])])]):t._e()],1)],1):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex"},[e("h5",{staticClass:"font-heading mb-0"},[this._v("Fields")])])}],!1,null,"0ca60157",null);e.default=M.exports},"Lp+G":function(t,e,a){(e=a("JPst")(!1)).push([t.i,".info[data-v-2ff007a6]{transition:all .1s ease-in-out;width:350px;margin-right:-350px}.info.open[data-v-2ff007a6]{margin-right:0}.user-profile-image-sm[data-v-2ff007a6]{width:40px;height:40px}.user-profile-image-sm span[data-v-2ff007a6]{font-size:13px}.contact.active[data-v-2ff007a6]{box-shadow:0 0 0 .1rem #5a5adf}.w-35[data-v-2ff007a6]{width:35% !important}.w-15[data-v-2ff007a6]{width:15% !important}.custom-field .edit-custom-field[data-v-2ff007a6]{opacity:0;transition:all .1s ease-in-out}.custom-field .edit-custom-field[aria-expanded=true][data-v-2ff007a6]{opacity:1}.custom-field:hover .edit-custom-field[data-v-2ff007a6]{opacity:1}.badge-icon svg[data-v-2ff007a6]{transform:scale(1.3);margin-right:2px}.badge-icon.text-primary svg[data-v-2ff007a6]{fill:#5a5adf}.badge-icon.text-warning svg[data-v-2ff007a6]{fill:#ffc107}.btn-close[data-v-2ff007a6]{top:10px;right:10px}",""]),t.exports=e},NEtQ:function(t,e,a){var s=a("mn+F");"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,n);s.locals&&(t.exports=s.locals)},O9dX:function(t,e,a){"use strict";a("/yFD")},RrSB:function(t,e,a){"use strict";var s=a("IGiv"),n=a("kdyA"),i={components:{ChevronRightIcon:s.a,ChevronLeftIcon:n.a},props:{data:{type:Object,require:!0}},computed:{pages:function(){for(var t=[],e=1,a=Math.ceil(this.data.total/this.data.per_page);e<=a;)t.push(e),e++;return t}},methods:{goToPage:function(t){if(t){t=new URL(t);var e=new URLSearchParams(t.search).get("page");this.change(e)}},change:function(t){this.$emit("change",t)}}},o=(a("O9dX"),a("KHd+")),c=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.data?a("div",[a("ul",{staticClass:"pagination shadow-sm mb-0 d-inline-flex"},[a("li",{staticClass:"page-item",class:{disabled:!t.data.prev_page_url},on:{click:function(e){return t.goToPage(t.data.prev_page_url)}}},[a("span",{staticClass:"page-link cursor-pointer"},[a("chevron-left-icon",{attrs:{width:"10",height:"10",transform:"scale(3.0)"}})],1)]),t._v(" "),t._l(t.pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e==t.data.current_page},on:{click:function(a){return t.change(e)}}},[a("span",{staticClass:"page-link cursor-pointer"},[t._v(t._s(e))])])})),t._v(" "),a("li",{staticClass:"page-item",class:{disabled:!t.data.next_page_url},on:{click:function(e){return t.goToPage(t.data.next_page_url)}}},[a("span",{staticClass:"page-link cursor-pointer"},[a("chevron-right-icon",{attrs:{width:"10",height:"10",transform:"scale(3.0)"}})],1)])],2)]):t._e()])}),[],!1,null,"f7e753c0",null);e.a=c.exports},dNBw:function(t,e,a){(e=a("JPst")(!1)).push([t.i,".page-item.disabled svg[data-v-f7e753c0]{opacity:.25}",""]),t.exports=e},eeqt:function(t,e,a){"use strict";var s={name:"arrow-left"},n=a("KHd+"),i=Object(n.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8.70710678,12 L18.5,12 C18.7761424,12 19,12.2238576 19,12.5 C19,12.7761424 18.7761424,13 18.5,13 L8.70710678,13 L11.8535534,16.1464466 C12.0488155,16.3417088 12.0488155,16.6582912 11.8535534,16.8535534 C11.6582912,17.0488155 11.3417088,17.0488155 11.1464466,16.8535534 L7.14644661,12.8535534 C6.95118446,12.6582912 6.95118446,12.3417088 7.14644661,12.1464466 L11.1464466,8.14644661 C11.3417088,7.95118446 11.6582912,7.95118446 11.8535534,8.14644661 C12.0488155,8.34170876 12.0488155,8.65829124 11.8535534,8.85355339 L8.70710678,12 Z"}})])}),[],!1,null,null,null);e.a=i.exports},hlRI:function(t,e,a){"use strict";a.r(e);var s=a("L2JU"),n=a("jBWl"),i=a("MCve"),o=a("4m4z"),c=a("T1qZ"),r=a("5cWj"),l=a("lIWo"),d=a("dRai"),u=a("cmxz"),v=a("grtR"),m=a("NalG"),f=a("XPXJ"),p=a("KlRW"),h=a("/X8E");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){C(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var b={components:{Modal:n.a,VueFormValidate:i.a,VueCheckbox:o.a,VueButton:c.a,ToggleSwitch:r.a,Info:l.default,MoreIcon:d.a,PlusIcon:u.a,TrashIcon:v.a,PencilIcon:m.a,ClockIcon:f.a,CheckmarkCircleIcon:p.a,CloseIcon:h.a,gallery:function(){return a.e(26).then(a.bind(null,"kMA9"))}},data:function(){return{infoTab:"",selectedContact:null,manageContact:!1,manageFields:!1,addContact:!1,newContact:{custom_fields:{},blacklisted_services:[],sendToEmail:1},activeTab:"custom_fields",selectedFile:null,addField:!1,newField:"",resendLoading:!1,clonedContact:null}},computed:_(_({},Object(s.d)({conversations:function(t){return t.conversations.index},contacts:function(t){return t.contacts.index},ready:function(t){return t.contacts.ready},services:function(t){return t.services.index},user_blacklisted_services:function(t){return t.user_blacklisted_services.index}})),{},{defaultEmailMessage:function(){return"".concat(this.$root.auth.full_name," has invited you in ").concat(APP_NAME)},blacklisted_services:function(){return this.user_blacklisted_services[(this.selectedContact.contact_user||{}).id]||[]},conversation:function(){var t=this;if(!this.selectedContact)return{};var e=this.conversations.find((function(e){return 1==e.members.length&&e.member.id==t.selectedContact.contact_user.id}));return e?this.selectedContact.ready||this.showConversation({id:e.id}).then((function(){e.files=null,t.$root.getFiles(e)})):(this.$root.auth.services=this.services,e={ready:!0,member:this.selectedContact.contact_user,members:[this.selectedContact.contact_user],user:this.$root.auth,user_id:this.$root.auth.id}),e.member.contact=this.selectedContact,this.selectedContact.ready=!0,e}}),watch:{ready:function(t){this.$root.contentloading=!t}},created:function(){var t=this;this.$root.contentloading=!this.ready,this.getServices(),this.getContacts(),this.showUserCustomFields(),this.$root.socket.on("invite_token",(function(e){e&&t.getContactFromInviteToken(e)}))},mounted:function(){var t=this;this.$root.intros.contacts.enabled&&setTimeout((function(){document.querySelector(".introjs-overlay")||t.$root.intros.contacts.intro.start()}),500)},methods:_(_({},Object(s.b)({getServices:"services/index",getContacts:"contacts/index",storeContact:"contacts/store",updateContact:"contacts/update",deleteContact:"contacts/delete",getContactFromInviteToken:"contacts/get_contact_from_invite_token",showUserCustomFields:"user_custom_fields/show",storeUserCustomFields:"user_custom_fields/store",showConversation:"conversations/show"})),{},{update:function(t){this.updateContact(t),this.$refs.editModal.hide()},goToContact:function(t){this.$router.push("/dashboard/contacts/".concat(t.id))},resendEmail:function(t){var e=this;this.resendLoading=!0,axios.post("/contacts/".concat(t.id,"/resend")).then((function(){e.resendLoading=!1,e.$refs.resendModal.hide(),e.$toasted.show("Invitation email has been sent successfully.")}))},toggleContactServiceBlacklist:function(t,e){var a=e.blacklisted_services.findIndex((function(e){return e==t.id}));a>-1?e.blacklisted_services.splice(a,1):e.blacklisted_services.push(t.id)},toggleServiceBlacklist:function(t){var e=this.newContact.blacklisted_services.findIndex((function(e){return e==t.id}));e>-1?this.newContact.blacklisted_services.splice(e,1):this.newContact.blacklisted_services.push(t.id)},openFile:function(t){"file"==t.type?this.$root.downloadMedia(t):this.selectedFile=t},resetNewContact:function(){this.newContact={custom_fields:{},blacklisted_services:[]}},addNewField:function(){this.newField.trim().length>0&&(this.$root.auth.custom_fields.push(this.newField),this.newField="",this.addField=!1),this.storeUserCustomFields(),this.$toasted.show("Fields saved successfully.")},updateCustomField:function(t){this.$root.auth.custom_fields[t]=this.editCustomField,this.storeUserCustomFields(),this.$refs.customFieldsLabel.click()},store:function(){var t=this;this.newContact.email&&(this.storeContact(this.newContact).then((function(){t.newContact={custom_fields:{},blacklisted_services:[],sendToEmail:1}})),this.$refs.addModal.hide())}})},w=(a("z2n/"),a("KHd+")),x=Object(w.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"h-100"},[a("div",{staticClass:"d-flex h-100"},[a("div",{staticClass:"h-100 flex-grow-1"},[a("div",{staticClass:"d-flex flex-column h-100"},[a("div",{staticClass:"border-bottom bg-white p-3 d-flex align-items-center"},[a("h5",{staticClass:"font-heading mb-0"},[t._v("Contacts")]),t._v(" "),a("div",{staticClass:"ml-auto d-flex align-items-center"},[a("button",{staticClass:"btn btn-light shadow-none d-flex align-items-center",attrs:{"data-intro":t.$root.intros.contacts.steps[0],"data-step":"1",type:"button"},on:{click:function(e){return t.$refs.addModal.show()}}},[a("plus-icon",{staticClass:"btn-icon"}),t._v("\n\t\t\t\t\t\t\tAdd Contact\n\t\t\t\t\t\t")],1),t._v(" "),a("button",{staticClass:"btn btn-light ml-1 shadow-none",attrs:{"data-intro":t.$root.intros.contacts.steps[1],"data-step":"2",type:"button"},on:{click:function(e){t.infoTab="manage_fields"}}},[t._v("Manage Fields")])])]),t._v(" "),a("div",{staticClass:"rounded mt-2 overflow-auto h-100 flex-grow-1 d-flex flex-column"},[0==t.contacts.length?a("div",{staticClass:"text-secondary text-center p-4 position-absolute-center"},[a("div",{staticClass:"h6 mb-0 font-weight-normal"},[t._v("You don't have any contacts yet.")])]):a("div",{staticClass:"overflow-auto flex-grow-1 pb-4 px-4 h-100"},[a("table",{staticClass:"table table-borderless table-hover mb-0"},[t._m(0),t._v(" "),a("tbody",t._l(t.contacts,(function(e,s){return a("tr",{key:e.id,staticClass:"cursor-pointer"},[a("td",{staticClass:"align-middle",on:{click:function(a){return t.goToContact(e)}}},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"user-profile-image user-profile-image-sm",style:{backgroundImage:"url("+e.contact_user.profile_image+")"}},[e.contact_user.profile_image?t._e():a("span",[t._v(t._s(e.contact_user.initials))])]),t._v(" "),a("div",{staticClass:"ml-2 overflow-hidden flex-1"},[a("h6",{staticClass:"font-heading mb-0 text-ellipsis"},[t._v(t._s(e.contact_user.full_name))]),t._v(" "),a("small",{staticClass:"d-block text-muted"},[t._v(t._s(e.contact_user.email))])])])]),t._v(" "),a("td",{staticClass:"align-middle",on:{click:function(a){return t.goToContact(e)}}},[a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"badge badge-icon d-inline-flex align-items-center",class:[e.is_pending?"bg-warning-light text-warning":"bg-primary-light text-primary"]},[e.is_pending?a("clock-icon",{attrs:{height:"12",width:"12"}}):a("checkmark-circle-icon",{attrs:{height:"12",width:"12"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t "+t._s(e.is_pending?"Pending":"Accepted")+"\n\t\t\t\t\t\t\t\t\t\t\t")],1)])]),t._v(" "),a("td",{staticClass:"align-middle",on:{click:function(a){return t.goToContact(e)}}},[a("div",{staticClass:"flex-grow-1 text-muted"},[t._v(t._s(e.created_at_format))])]),t._v(" "),a("td",{staticClass:"align-middle"},[a("div",{staticClass:"flex-grow-1 text-right"},[a("div",{staticClass:"dropleft"},[a("button",{staticClass:"btn btn-white p-1 line-height-0",attrs:{"data-intro":0==s?t.$root.intros.contacts.steps[2]:null,"data-step":0==s?3:null,"data-toggle":"dropdown"}},[a("more-icon",{staticClass:"fill-gray-500",attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e.is_pending?a("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(a){t.selectedContact=e,t.$refs.resendModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tResend invitation\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),a("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(a){t.clonedContact=Object.assign({},e),t.$refs.editModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(a){t.selectedContact=e,t.$refs.deleteModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])})),0)])])])])]),t._v(" "),a("div",{staticClass:"info bg-white h-100 border-left d-flex flex-column position-relative",class:{open:t.infoTab}},[a("button",{staticClass:"btn btn-white p-0 btn-close position-absolute",attrs:{type:"button"},on:{click:function(e){t.infoTab=""}}},[a("close-icon",{attrs:{height:"30",width:"30"}})],1),t._v(" "),"manage_contact"==t.infoTab?[t._m(1),t._v(" "),t.selectedContact?[a("info",{attrs:{"close-button":!1,conversation:t.conversation}})]:t._e()]:"manage_fields"==t.infoTab?[t._m(2),t._v(" "),a("div",{ref:"customFieldsLabel",staticClass:"p-3"},[t._l(t.$root.auth.custom_fields,(function(e,s){return a("div",{key:s,staticClass:"d-flex align-items-center custom-field position-relative"},[a("div",{staticClass:"mb-1 d-flex align-items-center w-100"},[a("input",{staticClass:"form-control flex-grow-1",attrs:{type:"text"},domProps:{value:e}}),t._v(" "),a("trash-icon",{staticClass:"cursor-pointer ml-1",attrs:{width:"18",height:"18"},nativeOn:{click:function(e){return t.$root.auth.custom_fields.splice(s,1)}}})],1)])})),t._v(" "),a("div",{staticClass:"mb-1 d-flex align-items-center w-100"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newField,expression:"newField"}],staticClass:"form-control flex-grow-1",attrs:{type:"text",placeholder:"New Field"},domProps:{value:t.newField},on:{input:function(e){e.target.composing||(t.newField=e.target.value)}}}),t._v(" "),a("trash-icon",{staticClass:"ml-1 opacity-0",attrs:{width:"18",height:"18"}})],1),t._v(" "),a("div",{staticClass:"d-flex mt-1"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.addField},on:{click:function(e){return t.addNewField()}}},[t._v("Save")])])],2)]:t._e()],2)]),t._v(" "),a("modal",{ref:"editModal",attrs:{"close-button":!1}},[a("h5",{staticClass:"font-heading mb-3"},[t._v("Edit Contact")]),t._v(" "),t.clonedContact?a("vue-form-validate",{on:{submit:function(e){return t.update(t.clonedContact)}}},[a("fieldset",{attrs:{disabled:!t.clonedContact.is_pending}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.clonedContact.email,expression:"clonedContact.email"}],staticClass:"form-control",attrs:{type:"email","data-required":""},domProps:{value:t.clonedContact.email},on:{input:function(e){e.target.composing||t.$set(t.clonedContact,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row form-group"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[t._v("First Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.clonedContact.first_name,expression:"clonedContact.first_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.clonedContact.first_name},on:{input:function(e){e.target.composing||t.$set(t.clonedContact,"first_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[t._v("Last Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.clonedContact.last_name,expression:"clonedContact.last_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.clonedContact.last_name},on:{input:function(e){e.target.composing||t.$set(t.clonedContact,"last_name",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("strong",{staticClass:"d-block mb-2 font-weight-bold"},[t._v("Available services")]),t._v(" "),t._l(t.services,(function(e){return a("div",{key:e.id,staticClass:"d-flex align-items-center mb-2 rounded p-3 bg-light"},[a("div",[a("h6",{staticClass:"font-heading mb-0"},[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"ml-auto"},[a("toggle-switch",{attrs:{"active-class":"bg-primary",value:!t.clonedContact.blacklisted_services.find((function(t){return t==e.id}))},on:{input:function(a){return t.toggleContactServiceBlacklist(e,t.clonedContact)}}})],1)])}))],2),t._v(" "),a("div",{staticClass:"d-flex mt-4"},[a("button",{staticClass:"btn btn-light shadow-none",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"ml-auto btn btn-primary",attrs:{type:"submit"}},[t._v("Update")])])]):t._e()],1),t._v(" "),a("modal",{ref:"addModal",attrs:{size:"modal-lg","close-button":!1}},[a("h5",{staticClass:"font-heading mb-3"},[t._v("Add Contact")]),t._v(" "),a("vue-form-validate",{on:{submit:t.store}},[a("div",{staticClass:"row mx-0 mb-2"},[a("div",{staticClass:"col-md-6 px-0"},[a("div",{staticClass:"pr-3"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.email,expression:"newContact.email"}],staticClass:"form-control",attrs:{type:"email","data-required":""},domProps:{value:t.newContact.email},on:{input:function(e){e.target.composing||t.$set(t.newContact,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row form-group"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[t._v("First Name (Optional)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.first_name,expression:"newContact.first_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.first_name},on:{input:function(e){e.target.composing||t.$set(t.newContact,"first_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[t._v("Last Name (Optional)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.last_name,expression:"newContact.last_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.last_name},on:{input:function(e){e.target.composing||t.$set(t.newContact,"last_name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("strong",{staticClass:"d-block mb-2 font-weight-bold"},[t._v("Available services")]),t._v(" "),t._l(t.services,(function(e){return a("div",{key:e.id,staticClass:"d-flex align-items-center mb-2 rounded p-3 bg-light"},[a("div",[a("h6",{staticClass:"font-heading mb-0"},[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"ml-auto"},[a("toggle-switch",{attrs:{"active-class":"bg-primary",value:!t.newContact.blacklisted_services.find((function(t){return t==e.id}))},on:{input:function(a){return t.toggleServiceBlacklist(e)}}})],1)])}))],2)])]),t._v(" "),a("div",{staticClass:"col-md-6 border-left border-gray-200 px-0"},[a("div",{staticClass:"pl-3"},[a("div",{staticClass:"form-group"},[a("strong",{staticClass:"d-block mb-2"},[t._v("Invitation Message (Optional)")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newContact.invite_message,expression:"newContact.invite_message"}],staticClass:"form-control resize-none mb-2",attrs:{cols:"10",placeholder:t.defaultEmailMessage},domProps:{value:t.newContact.invite_message},on:{input:function(e){e.target.composing||t.$set(t.newContact,"invite_message",e.target.value)}}}),t._v(" "),a("vue-checkbox",{attrs:{label:"Send invitation link to email"},model:{value:t.newContact.sendToEmail,callback:function(e){t.$set(t.newContact,"sendToEmail",e)},expression:"newContact.sendToEmail"}})],1),t._v(" "),(t.$root.auth.custom_fields||[]).length>0?a("div",{staticClass:"form-group"},[a("strong",{staticClass:"d-block mb-2"},[t._v("Fields (Optional)")]),t._v(" "),a("div",{staticClass:"form-row"},t._l(t.$root.auth.custom_fields,(function(e){return a("div",{key:e,staticClass:"col-6 mb-2"},[a("label",{staticClass:"form-label"},[t._v(t._s(e))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.custom_fields[e],expression:"newContact.custom_fields[field]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.custom_fields[e]},on:{input:function(a){a.target.composing||t.$set(t.newContact.custom_fields,e,a.target.value)}}})])})),0)]):t._e()])])]),t._v(" "),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-light shadow-none",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"ml-auto btn btn-primary",attrs:{type:"submit"}},[t._v("Add")])])])],1),t._v(" "),a("modal",{ref:"resendModal",attrs:{"close-button":!1}},[t.selectedContact?[a("h5",{staticClass:"font-heading text-center"},[t._v("Resend Invitation")]),t._v(" "),a("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\tAre you sure to resend the invitation email to contact\n\t\t\t\t"),a("strong",[t._v(t._s(t.selectedContact.contact_user.full_name.trim()||t.selectedContact.contact_user.email))]),t._v("\n\t\t\t\t?\n\t\t\t\t"),a("br")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-light shadow-none text-body",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("vue-button",{attrs:{button_class:"btn btn-primary ml-auto",loading:t.resendLoading,type:"button"},on:{click:function(e){return t.resendEmail(t.selectedContact)}}},[t._v("Resend Invitation")])],1)]:t._e()],2),t._v(" "),a("modal",{ref:"deleteModal",attrs:{"close-button":!1}},[t.selectedContact?[a("h5",{staticClass:"font-heading text-center"},[t._v("Delete Contact")]),t._v(" "),a("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\tAre you sure to delete contact\n\t\t\t\t"),a("strong",[t._v(t._s(t.selectedContact.contact_user.full_name.trim()||t.selectedContact.contact_user.email))]),t._v("\n\t\t\t\t?\n\t\t\t\t"),a("br"),t._v(" "),a("span",{staticClass:"text-danger"},[t._v("This action cannot be undone")])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-light shadow-none text-body",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"btn btn-danger ml-auto",attrs:{type:"button"},on:{click:function(e){t.deleteContact(t.selectedContact),t.$refs.deleteModal.hide()}}},[t._v("\n\t\t\t\t\tDelete\n\t\t\t\t")])])]:t._e()],2),t._v(" "),a("gallery",{attrs:{conversation:t.conversation,file:t.selectedFile},on:{close:function(e){t.selectedFile=null}}})],1):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Status")]),this._v(" "),e("th",[this._v("Date Added")]),this._v(" "),e("th")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Manage Contact")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Manage Fields")])])}],!1,null,"2ff007a6",null);e.default=x.exports},i93w:function(t,e,a){t.exports=function(){"use strict";return function(t,e){e.prototype.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)}}}()},"mn+F":function(t,e,a){(e=a("JPst")(!1)).push([t.i,".info[data-v-0ca60157]{transition:all .1s ease-in-out;width:350px;margin-right:-350px}.info.open[data-v-0ca60157]{margin-right:0}.user-profile-image[data-v-0ca60157]{width:100px;height:100px}.user-profile-image span[data-v-0ca60157]{font-size:35px}.user-profile-image-sm[data-v-0ca60157]{width:40px;height:40px}.user-profile-image-sm span[data-v-0ca60157]{font-size:13px}.contact.active[data-v-0ca60157]{box-shadow:0 0 0 .1rem #5a5adf}.w-35[data-v-0ca60157]{width:35% !important}.w-15[data-v-0ca60157]{width:15% !important}.custom-field .edit-custom-field[data-v-0ca60157]{opacity:0;transition:all .1s ease-in-out}.custom-field .edit-custom-field[aria-expanded=true][data-v-0ca60157]{opacity:1}.custom-field:hover .edit-custom-field[data-v-0ca60157]{opacity:1}.badge-icon svg[data-v-0ca60157]{transform:scale(1.3);margin-right:2px}.badge-icon.text-primary svg[data-v-0ca60157]{fill:#5a5adf}.badge-icon.text-warning svg[data-v-0ca60157]{fill:#ffc107}.btn-close[data-v-0ca60157]{top:10px;right:10px}",""]),t.exports=e},o4f0:function(t,e,a){"use strict";a("NEtQ")},s3Wo:function(t,e,a){t.exports=function(){"use strict";return function(t,e){e.prototype.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)}}}()},t0yX:function(t,e,a){var s=a("Lp+G");"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,n);s.locals&&(t.exports=s.locals)},"z2n/":function(t,e,a){"use strict";a("t0yX")}}]);