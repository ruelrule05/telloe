(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{RYqS:function(t,e,s){var n=s("uYyd");"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,a);n.locals&&(t.exports=n.locals)},U0rH:function(t,e,s){"use strict";var n=s("RYqS");s.n(n).a},jXwf:function(t,e,s){"use strict";s.r(e);var n=s("L2JU"),a=s("jBWl"),i=s("MCve"),o=s("4m4z"),c=s("T1qZ"),l=s("5cWj"),r=s("lIWo"),d=s("dRai"),u=s("cmxz"),v=s("grtR"),m=s("NalG"),f=s("XPXJ"),_=s("KlRW"),h=s("/X8E");function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function C(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(Object(s),!0).forEach((function(e){g(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function g(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var p={components:{Modal:a.a,VueFormValidate:i.a,VueCheckbox:o.a,VueButton:c.a,ToggleSwitch:l.a,Info:r.default,MoreIcon:d.a,PlusIcon:u.a,TrashIcon:v.a,PencilIcon:m.a,ClockIcon:f.a,CheckmarkCircleIcon:_.a,CloseIcon:h.a,gallery:function(){return s.e(16).then(s.bind(null,"kMA9"))}},data:function(){return{infoTab:"",selectedContact:null,manageContact:!1,manageFields:!1,addContact:!1,newContact:{custom_fields:{},blacklisted_services:[],sendToEmail:1},activeTab:"custom_fields",selectedFile:null,addField:!1,newField:"",resendLoading:!1}},computed:C(C({},Object(n.d)({conversations:function(t){return t.conversations.index},contacts:function(t){return t.contacts.index},ready:function(t){return t.contacts.ready},services:function(t){return t.services.index},user_blacklisted_services:function(t){return t.user_blacklisted_services.index}})),{},{defaultEmailMessage:function(){return"".concat(this.$root.auth.full_name," has invited you in ").concat(APP_NAME)},blacklisted_services:function(){return this.user_blacklisted_services[(this.selectedContact.contact_user||{}).id]||[]},conversation:function(){var t=this;if(!this.selectedContact)return{};var e=this.conversations.find((function(e){return 1==e.members.length&&e.member.id==t.selectedContact.contact_user.id}));return e?this.selectedContact.ready||this.showConversation({id:e.id}).then((function(){e.files=null,t.$root.getFiles(e)})):(this.$root.auth.services=this.services,e={ready:!0,member:this.selectedContact.contact_user,members:[this.selectedContact.contact_user],user:this.$root.auth,user_id:this.$root.auth.id}),e.member.contact=this.selectedContact,this.selectedContact.ready=!0,e}}),watch:{ready:function(t){this.$root.contentloading=!t}},created:function(){var t=this;this.$root.contentloading=!this.ready,this.getServices(),this.getContacts(),this.showUserCustomFields(),this.$root.socket.on("invite_token",(function(e){e&&t.getContactFromInviteToken(e)}))},mounted:function(){var t=this;this.$root.intros.add_contact.enabled&&setTimeout((function(){document.querySelector(".introjs-overlay")||t.$root.introJS.start().goToStepNumber(t.$root.intros.add_contact.step)}),500)},methods:C(C({},Object(n.b)({getServices:"services/index",getContacts:"contacts/index",storeContact:"contacts/store",deleteContact:"contacts/delete",getContactFromInviteToken:"contacts/get_contact_from_invite_token",showUserCustomFields:"user_custom_fields/show",storeUserCustomFields:"user_custom_fields/store",showConversation:"conversations/show"})),{},{resendEmail:function(t){var e=this;this.resendLoading=!0,axios.post("/contacts/".concat(t.id,"/resend")).then((function(){e.resendLoading=!1,e.$refs.resendModal.hide(),e.$toasted.show("Invitation email has been sent successfully.")}))},toggleServiceBlacklist:function(t){var e=this.newContact.blacklisted_services.findIndex((function(e){return e==t.id}));e>-1?this.newContact.blacklisted_services.splice(e,1):this.newContact.blacklisted_services.push(t.id)},openFile:function(t){"file"==t.type?this.$root.downloadMedia(t):this.selectedFile=t},resetNewContact:function(){this.newContact={custom_fields:{},blacklisted_services:[]}},addNewField:function(){this.newField.trim().length>0&&(this.$root.auth.custom_fields.push(this.newField),this.newField="",this.addField=!1),this.storeUserCustomFields(),this.$toasted.show("Fields saved successfully.")},updateCustomField:function(t){this.$root.auth.custom_fields[t]=this.editCustomField,this.storeUserCustomFields(),this.$refs.customFieldsLabel.click()},store:function(){var t=this;this.newContact.email&&(this.storeContact(this.newContact).then((function(){t.newContact={custom_fields:{},blacklisted_services:[],sendToEmail:1}})),this.infoTab="")}})},w=(s("U0rH"),s("KHd+")),x=Object(w.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.ready?s("div",{staticClass:"h-100"},[s("div",{staticClass:"d-flex h-100"},[s("div",{staticClass:"h-100 flex-grow-1"},[s("div",{staticClass:"d-flex flex-column h-100"},[s("div",{staticClass:"border-bottom bg-white p-3 d-flex align-items-center"},[s("h5",{staticClass:"font-heading mb-0"},[t._v("Contacts")]),t._v(" "),s("div",{staticClass:"ml-auto d-flex align-items-center"},[s("button",{staticClass:"btn btn-light shadow-none d-flex align-items-center",attrs:{"data-intro":t.$root.intros.add_contact.intro,"data-step":t.$root.intros.add_contact.step,type:"button"},on:{click:function(e){t.infoTab="add_contact"}}},[s("plus-icon",{staticClass:"btn-icon"}),t._v("\n\t\t                        Add Contact\n\t\t                    ")],1),t._v(" "),s("button",{staticClass:"btn btn-light ml-1 shadow-none",attrs:{"data-intro":t.$root.intros.manage_fields.intro,"data-step":t.$root.intros.manage_fields.step,type:"button"},on:{click:function(e){t.infoTab="manage_fields"}}},[t._v("Manage Fields")])])]),t._v(" "),s("div",{staticClass:"rounded mt-2 overflow-auto h-100 flex-grow-1 d-flex flex-column"},[0==t.contacts.length?s("div",{staticClass:"text-secondary text-center p-4 position-absolute-center"},[s("div",{staticClass:"h6 mb-0 font-weight-normal"},[t._v("You don't have any contacts yet.")])]):s("div",{staticClass:"overflow-auto flex-grow-1 pb-4 px-4 h-100"},[s("table",{staticClass:"table table-borderless table-fixed-header mb-0"},[t._m(0),t._v(" "),s("tbody",t._l(t.contacts,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle"},[s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticClass:"user-profile-image user-profile-image-sm",style:{backgroundImage:"url("+e.contact_user.profile_image+")"}},[e.contact_user.profile_image?t._e():s("span",[t._v(t._s(e.contact_user.initials))])]),t._v(" "),s("div",{staticClass:"ml-2 overflow-hidden flex-1"},[s("h6",{staticClass:"font-heading mb-0 text-ellipsis"},[t._v(t._s(e.contact_user.full_name))]),t._v(" "),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(e.contact_user.email))])])])]),t._v(" "),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"badge badge-icon d-inline-flex align-items-center",class:[e.is_pending?"bg-warning-light text-warning":"bg-primary-light text-primary"]},[e.is_pending?s("clock-icon",{attrs:{height:"12",width:"12"}}):s("checkmark-circle-icon",{attrs:{height:"12",width:"12"}}),t._v("\n\t\t\t\t\t\t                    \t\tÂ "+t._s(e.is_pending?"Pending":"Accepted")+"\n\t\t\t\t\t\t                    \t")],1)])]),t._v(" "),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"flex-grow-1 text-muted"},[t._v(t._s(e.created_at_format))])]),t._v(" "),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"flex-grow-1 text-right"},[s("div",{staticClass:"dropleft"},[s("button",{staticClass:"btn btn-white p-1 line-height-0",attrs:{"data-toggle":"dropdown"}},[s("more-icon",{staticClass:"fill-gray-500",attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e.is_pending?s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(s){t.selectedContact=e,t.$refs.resendModal.show()}}},[t._v("Resend invitation")]):t._e(),t._v(" "),s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(s){t.selectedContact=e,t.infoTab="manage_contact",t.selectedContact.ready=!1}}},[t._v("Manage")]),t._v(" "),s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(s){t.selectedContact=e,t.$refs.deleteModal.show()}}},[t._v("Delete")])])])])])])})),0)])])])])]),t._v(" "),s("div",{staticClass:"info bg-white h-100 border-left d-flex flex-column position-relative",class:{open:t.infoTab}},[s("button",{staticClass:"btn btn-white p-0 btn-close position-absolute",attrs:{type:"button"},on:{click:function(e){t.infoTab=""}}},[s("close-icon",{attrs:{height:"30",width:"30"}})],1),t._v(" "),"manage_contact"==t.infoTab?[t._m(1),t._v(" "),t.selectedContact?[s("info",{attrs:{"close-button":!1,conversation:t.conversation}})]:t._e()]:"manage_fields"==t.infoTab?[t._m(2),t._v(" "),s("div",{ref:"customFieldsLabel",staticClass:"p-3"},[t._l(t.$root.auth.custom_fields,(function(e,n){return s("div",{key:n,staticClass:"d-flex align-items-center custom-field position-relative"},[s("div",{staticClass:"mb-1 d-flex align-items-center w-100"},[s("input",{staticClass:"form-control flex-grow-1",attrs:{type:"text"},domProps:{value:e}}),t._v(" "),s("trash-icon",{staticClass:"cursor-pointer ml-1",attrs:{width:"18",height:"18"},nativeOn:{click:function(e){return t.$root.auth.custom_fields.splice(n,1)}}})],1)])})),t._v(" "),s("div",{staticClass:"mb-1 d-flex align-items-center w-100"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newField,expression:"newField"}],staticClass:"form-control flex-grow-1",attrs:{type:"text",placeholder:"New Field"},domProps:{value:t.newField},on:{input:function(e){e.target.composing||(t.newField=e.target.value)}}}),t._v(" "),s("trash-icon",{staticClass:"ml-1 opacity-0",attrs:{width:"18",height:"18"}})],1),t._v(" "),s("div",{staticClass:"d-flex mt-1"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.addField},on:{click:function(e){return t.addNewField()}}},[t._v("Save")])])],2)]:"add_contact"==t.infoTab?s("div",{staticClass:"d-flex flex-column overflow-hidden"},[t._m(3),t._v(" "),s("div",{staticClass:"p-4 overflow-auto flex-grow-1"},[s("vue-form-validate",{on:{submit:t.store}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.email,expression:"newContact.email"}],staticClass:"form-control",attrs:{type:"email","data-required":""},domProps:{value:t.newContact.email},on:{input:function(e){e.target.composing||t.$set(t.newContact,"email",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-row form-group"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label"},[t._v("First Name (Optional)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.first_name,expression:"newContact.first_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.first_name},on:{input:function(e){e.target.composing||t.$set(t.newContact,"first_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col"},[s("label",{staticClass:"form-label"},[t._v("Last Name (Optional)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.last_name,expression:"newContact.last_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.last_name},on:{input:function(e){e.target.composing||t.$set(t.newContact,"last_name",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("strong",{staticClass:"d-block mb-2 font-weight-bold"},[t._v("Available services")]),t._v(" "),t._l(t.services,(function(e){return s("div",{key:e.id,staticClass:"d-flex align-items-center mb-2 rounded p-3 bg-light"},[s("div",[s("h6",{staticClass:"font-heading mb-0"},[t._v(t._s(e.name))]),t._v(" "),s("small",{staticClass:"text-gray d-block"},[t._v(t._s(e.duration)+" minutes")])]),t._v(" "),s("div",{staticClass:"ml-auto"},[s("toggle-switch",{attrs:{"active-class":"bg-green",value:!t.newContact.blacklisted_services.find((function(t){return t==e.id}))},on:{input:function(s){return t.toggleServiceBlacklist(e)}}})],1)])}))],2),t._v(" "),(t.$root.auth.custom_fields||[]).length>0?s("div",{staticClass:"form-group"},[s("strong",{staticClass:"d-block mb-2"},[t._v("Fields (Optional)")]),t._v(" "),s("div",{staticClass:"form-row"},t._l(t.$root.auth.custom_fields,(function(e){return s("div",{key:e,staticClass:"col-6 mb-2"},[s("label",{staticClass:"form-label"},[t._v(t._s(e))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.custom_fields[e],expression:"newContact.custom_fields[field]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.custom_fields[e]},on:{input:function(s){s.target.composing||t.$set(t.newContact.custom_fields,e,s.target.value)}}})])})),0)]):t._e(),t._v(" "),s("div",{staticClass:"form-group"},[s("strong",{staticClass:"d-block mb-2"},[t._v("Invitation Message (Optional)")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newContact.invite_message,expression:"newContact.invite_message"}],staticClass:"form-control resize-none",attrs:{cols:"10",placeholder:t.defaultEmailMessage},domProps:{value:t.newContact.invite_message},on:{input:function(e){e.target.composing||t.$set(t.newContact,"invite_message",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("vue-checkbox",{attrs:{label:"Send invitation link to email"},model:{value:t.newContact.sendToEmail,callback:function(e){t.$set(t.newContact,"sendToEmail",e)},expression:"newContact.sendToEmail"}})],1),t._v(" "),s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-white border",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"ml-auto btn btn-primary",attrs:{type:"submit"}},[t._v("Add")])])])],1)]):t._e()],2)]),t._v(" "),s("modal",{ref:"resendModal",attrs:{"close-button":!1}},[t.selectedContact?[s("h5",{staticClass:"font-heading text-center"},[t._v("Resend Invitation")]),t._v(" "),s("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\t\tAre you sure to resend the invitation email to contact "),s("strong",[t._v(t._s(t.selectedContact.contact_user.full_name.trim()||t.selectedContact.contact_user.email))]),t._v("? "),s("br")]),t._v(" "),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-white border text-body",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("vue-button",{attrs:{button_class:"btn btn-primary ml-auto",loading:t.resendLoading,type:"button"},on:{click:function(e){return t.resendEmail(t.selectedContact)}}},[t._v("Resend Invitation")])],1)]:t._e()],2),t._v(" "),s("modal",{ref:"deleteModal",attrs:{"close-button":!1}},[t.selectedContact?[s("h5",{staticClass:"font-heading text-center"},[t._v("Delete Contact")]),t._v(" "),s("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\t\tAre you sure to delete contact "),s("strong",[t._v(t._s(t.selectedContact.contact_user.full_name.trim()||t.selectedContact.contact_user.email))]),t._v("? "),s("br"),t._v(" "),s("span",{staticClass:"text-danger"},[t._v("This action cannot be undone")])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-white border text-body",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-danger ml-auto",attrs:{type:"button"},on:{click:function(e){t.deleteContact(t.selectedContact),t.$refs.deleteModal.hide()}}},[t._v("Delete")])])]:t._e()],2),t._v(" "),s("gallery",{attrs:{conversation:t.conversation,file:t.selectedFile},on:{close:function(e){t.selectedFile=null}}})],1):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Status")]),this._v(" "),e("th",[this._v("Date Added")]),this._v(" "),e("th")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Manage Contact")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Manage Fields")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Add Contact")])])}],!1,null,"1d9fb002",null);e.default=x.exports},uYyd:function(t,e,s){(e=s("JPst")(!1)).push([t.i,".info[data-v-1d9fb002] {\n  transition: all 0.1s ease-in-out;\n  width: 350px;\n  margin-right: -350px;\n}\n.info.open[data-v-1d9fb002] {\n  margin-right: 0;\n}\n.user-profile-image-sm[data-v-1d9fb002] {\n  width: 40px;\n  height: 40px;\n}\n.user-profile-image-sm span[data-v-1d9fb002] {\n  font-size: 13px;\n}\n.contact.active[data-v-1d9fb002] {\n  box-shadow: 0 0 0 0.1rem #5A5ADF;\n}\n.w-35[data-v-1d9fb002] {\n  width: 35% !important;\n}\n.w-15[data-v-1d9fb002] {\n  width: 15% !important;\n}\n.custom-field .edit-custom-field[data-v-1d9fb002] {\n  opacity: 0;\n  transition: all 0.1s ease-in-out;\n}\n.custom-field .edit-custom-field[aria-expanded=true][data-v-1d9fb002] {\n  opacity: 1;\n}\n.custom-field:hover .edit-custom-field[data-v-1d9fb002] {\n  opacity: 1;\n}\n.badge-icon svg[data-v-1d9fb002] {\n  transform: scale(1.3);\n  margin-right: 2px;\n}\n.badge-icon.text-primary svg[data-v-1d9fb002] {\n  fill: #5A5ADF;\n}\n.badge-icon.text-warning svg[data-v-1d9fb002] {\n  fill: #ffc107;\n}\n.btn-close[data-v-1d9fb002] {\n  top: 10px;\n  right: 10px;\n}",""]),t.exports=e}}]);