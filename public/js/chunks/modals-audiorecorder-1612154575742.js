(self.webpackChunk=self.webpackChunk||[]).push([[112],{3186:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var s=a(3645),r=a.n(s)()((function(t){return t[1]}));r.push([t.id,'.wavesurfer-container .btn[data-v-23193c0a]{opacity:0}.wavesurfer-container:hover .btn[data-v-23193c0a]{opacity:1}.audio-recorder[data-v-23193c0a]{height:500px}.player-control[data-v-23193c0a]{z-index:10}.player-control button[data-v-23193c0a]{line-height:1!important;padding:15px!important;position:relative}.player-control button svg[data-v-23193c0a]{position:absolute;line-height:1!important;top:50%;left:50%;transform:translate(-50%,-50%)}.audio-control[data-v-23193c0a]{border:0!important;outline:0!important;width:50px;height:50px;border-radius:50%!important;background-color:#4a4a4a;position:relative;vertical-align:top}.audio-control.audio-pause[data-v-23193c0a]:before{left:19px}.audio-control.audio-pause[data-v-23193c0a]:after,.audio-control.audio-pause[data-v-23193c0a]:before{content:"";position:absolute;top:50%;transform:translateY(-50%);width:2px;height:35%;background-color:#fff;border-radius:5px}.audio-control.audio-pause[data-v-23193c0a]:after{left:27px}',""]);const o=r},7371:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var s=a(7484),r=a.n(s),o=a(1796),i=a.n(o),n=a(3336),c=a.n(n),d=a(9591),l=a(3674),u=a(9695),h=a(7790);const v={components:{CloseIcon:d.Z,MicrophoneIcon:l.Z,PlayIcon:u.Z,PauseIcon:h.Z},data:function(){return{audioRecorder:null,streams:null,blobs:[],recorderStatus:"",playerStatus:"paused",micReady:!1,duration:0,wavesurfer:null,hasRecorded:!1,timer:null}},created:function(){},beforeDestroy:function(){this.streams&&this.streams.getTracks().forEach((function(t){t.stop()}))},mounted:function(){var t=this;$(this.$refs.audioRecorderModal).modal("show"),this.initMic(),this.wavesurfer=i().create({container:document.querySelector("#wavesurfer"),height:200,barWidth:3,barHeight:1,barRadius:3,interact:!0,cursorWidth:1,cursorColor:"transparent",hideScrollbar:!0,plugins:[c().create()]}),this.wavesurfer.on("finish",(function(){t.playerStatus="paused",t.wavesurfer.seekTo(0)}))},computed:{},methods:{close:function(){var t=this;setTimeout((function(){t.$emit("close")}),150)},reset:function(){this.blobs=[],this.recorderStatus="",this.playerStatus="paused",this.duration=0,this.hasRecorded=!1,this.timer=null,this.wavesurfer.setCursorColor("transparent"),this.wavesurfer.empty(),this.audioRecorder.stop()},submit:function(){var t=this;this.blobs.length>0&&($(this.$refs.audioRecorderModal).modal("hide"),setTimeout((function(){var e=r()().valueOf(),a={source:new File(t.blobs,e,{type:t.blobs[0].type}),duration:t.secondsToDuration(t.wavesurfer.getDuration(),14,5)};t.$emit("submit",a),t.reset()}),150))},togglePlayer:function(){switch(this.playerStatus){case"paused":this.playerStatus="playing",this.wavesurfer.play();break;case"playing":this.playerStatus="paused",this.wavesurfer.pause()}},secondsToDuration:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=new Date(0);s.setSeconds(t);var r=s.toISOString().substr(e,a);return r},pauseRecord:function(){if(this.audioRecorder){clearInterval(this.timer),this.recorderStatus="paused",this.audioRecorder.requestData(),this.audioRecorder.pause();var t=new Blob(this.blobs,{type:"audio/mp3"});this.wavesurfer.microphone.stop(),this.wavesurfer.setCursorColor("#aaa"),this.wavesurfer.setProgressColor("#6e82ea"),this.wavesurfer.setWaveColor("#b5bce5"),this.wavesurfer.loadBlob(t)}},startRecord:function(){var t=this;this.audioRecorder&&(this.timer=setInterval((function(){t.duration+=.01}),10),this.hasRecorded?this.audioRecorder.resume():this.audioRecorder.start(30),this.hasRecorded=!0,this.recorderStatus="recording",this.wavesurfer.setCursorColor("transparent"),this.wavesurfer.setProgressColor("#6e82ea"),this.wavesurfer.setWaveColor("#6e82ea"),this.wavesurfer.microphone.start(this.streams))},initMic:function(){var t=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.streams=e,t.audioRecorder=new MediaRecorder(e),t.audioRecorder.ondataavailable=function(e){return t.blobs.push(e.data)},t.micReady=!0})).catch((function(t){alert("Unable to detect your microphone."),console.error(t)}))}}};var p=a(3379),f=a.n(p),b=a(3186),m={insert:"head",singleton:!1};f()(b.Z,m);b.Z.locals;const g=(0,a(1900).Z)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"audioRecorderModal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"h-100"},[a("div",{staticClass:"audio-recorder overflow-hidden"},[a("div",{staticClass:"d-flex flex-column h-100"},[a("div",{staticClass:"d-flex w-100"},[a("button",{staticClass:"btn ml-auto shadow-none",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.close}},[a("close-icon",{attrs:{height:"36",width:"36"}})],1)]),t._v(" "),a("div",{staticClass:"flex-grow-1 h-100 d-flex flex-column position-relative text-center"},[t.hasRecorded?t._e():a("div",{staticClass:"text-center position-absolute-center w-100"},[a("div",{staticClass:"h6 mb-0"},[t._v("Click to start recording")])]),t._v(" "),t.duration||t.recorderStatus?a("div",[a("div",{staticClass:"pt-4 d-inline-block text-center font-weight-light"},[a("div",{staticClass:"h2 mb-0"},[t._v(t._s(t.secondsToDuration(t.duration)))]),t._v(" "),a("div",{staticClass:"d-flex align-items-center"},["recording"==t.recorderStatus?[a("span",{staticClass:"chat-status bg-danger"},[t._v(" ")]),t._v(" \n\t\t\t\t\t\t\t\t\t\t\t\t"),a("small",{staticClass:"text-gray"},[t._v("Rec")])]:"paused"==t.recorderStatus?[a("span",{staticClass:"chat-status bg-gray"},[t._v(" ")]),t._v(" \n\t\t\t\t\t\t\t\t\t\t\t\t"),a("small",{staticClass:"text-gray"},[t._v("Paused")])]:t._e()],2)])]):t._e(),t._v(" "),a("div",{staticClass:"position-absolute-center w-100 wavesurfer-container"},[a("div",{attrs:{id:"wavesurfer"}}),t._v(" "),t.hasRecorded&&"paused"==t.recorderStatus?a("div",{staticClass:"player-control position-absolute-center"},[a("button",{staticClass:"btn btn-sm btn-white border-0 badge-pill py-2",on:{click:t.togglePlayer}},["paused"==t.playerStatus?a("play-icon",{attrs:{width:"15",height:"15"}}):"playing"==t.playerStatus?a("pause-icon",{attrs:{width:"15",height:"15"}}):t._e()],1)]):t._e()])]),t._v(" "),t.micReady?a("div",{staticClass:"flex-fill w-100 text-center px-5 pb-5"},[a("div",{staticClass:"d-flex align-items-center text-center"},[a("div",{staticClass:"w-25"},[t.hasRecorded?a("button",{staticClass:"btn font-weight-bold mr-auto",attrs:{"data-dismiss":"modal"},on:{click:t.close}},[t._v("Cancel")]):t._e()]),t._v(" "),a("div",{staticClass:"flex-grow-1"},["recording"==t.recorderStatus?a("button",{staticClass:"audio-control audio-pause",on:{click:t.pauseRecord}}):a("button",{staticClass:"audio-control audio-record",on:{click:t.startRecord}},[a("microphone-icon",{attrs:{fill:"white"}})],1)]),t._v(" "),a("div",{staticClass:"w-25"},[t.hasRecorded&&"paused"==t.recorderStatus?a("button",{staticClass:"btn font-weight-bold ml-auto",on:{click:t.submit}},[t._v("Send")]):t._e()])])]):t._e()])])])])])])])}),[],!1,null,"23193c0a",null).exports}}]);