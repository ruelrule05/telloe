(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"/yFD":function(t,e,s){var a=s("dNBw");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(t.exports=a.locals)},"56ir":function(t,e,s){"use strict";s.r(e);var a=s("o0o1"),n=s.n(a),i=s("L2JU"),o=s("jBWl"),c=s("KlRW"),r=s("dRai"),l=s("eeqt"),d=s("XPXJ"),u=s("grtR"),v=s("Wgwc"),f=s.n(v),m=s("RrSB"),h=s("UEn/"),p=s("WIcW"),g=s.n(p);function _(t,e,s,a,n,i,o){try{var c=t[i](o),r=c.value}catch(t){return void s(t)}c.done?e(r):Promise.resolve(r).then(a,n)}function b(t){return function(){var e=this,s=arguments;return new Promise((function(a,n){var i=t.apply(e,s);function o(t){_(i,a,n,o,c,"next",t)}function c(t){_(i,a,n,o,c,"throw",t)}o(void 0)}))}}function C(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?C(Object(s),!0).forEach((function(e){x(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function x(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var y=s("s3Wo"),k=s("i93w");f.a.extend(y),f.a.extend(k);var F=s("xCJq");Vue.use(g.a);var O={components:{Modal:o.a,CheckmarkCircleIcon:c.a,MoreIcon:r.a,ArrowLeftIcon:l.a,ClockIcon:d.a,Paginate:m.a,VueSelect:h.a,TrashIcon:u.a},data:function(){return{contact:null,clonedContact:null,filterServices:[],convertTime:F,dayjs:f.a,timeslots:[],newField:"",addField:!1}},computed:w(w({},Object(i.d)({services:function(t){return t.services.index}})),{},{servicesList:function(){var t=[];return this.services.forEach((function(e){t.push({text:e.name,value:e})})),t}}),watch:{},created:function(){this.getContact(),this.getServices()},mounted:function(){},methods:w(w({},Object(i.b)({getServices:"services/index",storeUserCustomFields:"user_custom_fields/store"})),{},{getSelectedBookingNewTimeslots:function(t){var e=this;return b(n.a.mark((function s(){var a;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.timeslots[e.selectedTimeslot.dayName][e.selectedTimeslot.index]){s.next=6;break}return s.next=4,axios.get("/services/".concat(e.selectedService.id,"?date=").concat(f()(t).format("YYYY-MM-DD"),"&single=1"));case 4:a=s.sent,e.selectedTimeslot.timeslots=a.data;case 6:case"end":return s.stop()}}),s)})))()},formatDate:function(t){return f()(t).format("MMMM D, YYYY")},filterByServices:function(t){var e=this;return b(n.a.mark((function s(){var a,i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.map((function(t){return t.id})),s.next=3,axios.get("/contacts/".concat(e.contact.id,"?page=").concat(e.contact.bookings.current_page,"&services=").concat(a));case 3:i=s.sent,e.contact.bookings=i.data.bookings;case 5:case"end":return s.stop()}}),s)})))()},getData:function(t){var e=this;return b(n.a.mark((function s(){var a;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,axios.get("/contacts/".concat(e.contact.id,"?page=").concat(t));case 2:a=s.sent,e.contact.bookings=a.data.bookings;case 4:case"end":return s.stop()}}),s)})))()},getContact:function(){var t=this;return b(n.a.mark((function e(){var s,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/contacts/".concat(t.$route.params.id));case 2:s=e.sent,(a=s.data).upcoming_bookings.forEach((function(t){t.start=f()("".concat(t.date," ").concat(t.start)).toDate()})),t.contact=a,i=JSON.parse(JSON.stringify(s.data)),t.clonedContact=i,t.$root.contentloading=!1;case 9:case"end":return e.stop()}}),e)})))()},resendEmail:function(t){var e=this;this.resendLoading=!0,axios.post("/contacts/".concat(t.id,"/resend")).then((function(){e.resendLoading=!1,e.$refs.resendModal.hide(),e.$toasted.show("Invitation email has been sent successfully.")}))},toggleServiceBlacklist:function(t){var e=this.newContact.blacklisted_services.findIndex((function(e){return e==t.id}));e>-1?this.newContact.blacklisted_services.splice(e,1):this.newContact.blacklisted_services.push(t.id)},openFile:function(t){"file"==t.type?this.$root.downloadMedia(t):this.selectedFile=t},resetNewContact:function(){this.newContact={custom_fields:{},blacklisted_services:[]}},addNewField:function(){this.newField.trim().length>0&&(this.$root.auth.custom_fields.push(this.newField),this.newField="",this.addField=!1),this.storeUserCustomFields(),this.$toasted.show("Fields saved successfully.")},updateCustomField:function(t){this.$root.auth.custom_fields[t]=this.editCustomField,this.storeUserCustomFields(),this.$refs.customFieldsLabel.click()},store:function(){var t=this;this.newContact.email&&(this.storeContact(this.newContact).then((function(){t.newContact={custom_fields:{},blacklisted_services:[],sendToEmail:1}})),this.infoTab="")}})},$=(s("oG9G"),s("KHd+")),P=Object($.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.contact?s("div",{staticClass:"w-100 h-100 overflow-hidden"},[s("div",{staticClass:"overflow-auto h-100"},[s("div",{staticClass:"p-4 d-flex align-items-center"},[s("button",{staticClass:"btn p-1 btn-white badge-pill shadow-sm",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/dashboard/contacts")}}},[s("arrow-left-icon",{attrs:{width:"30",height:"30"}})],1),t._v(" "),s("div",{staticClass:"dropdown ml-auto"},[s("button",{staticClass:"btn p-2 btn-white badge-pill shadow-sm",attrs:{"data-toggle":"dropdown","data-offset":"-130, 10"}},[s("more-icon",{attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),s("div",{staticClass:"dropdown-menu"},[s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.$refs.editModal.show()}}},[t._v("\n\t\t\t\t\t\tEdit\n\t\t\t\t\t")]),t._v(" "),s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.$refs.deleteModal.show()}}},[t._v("\n\t\t\t\t\t\tDelete\n\t\t\t\t\t")])])])]),t._v(" "),s("div",{staticClass:"px-4"},[s("div",{staticClass:"row px-2 align-items-stretch"},[s("div",{staticClass:"col-md-5 px-2"},[s("div",{staticClass:"px-1"},[s("div",{staticClass:"rounded bg-white shadow-sm p-3 mb-4"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"user-profile-image d-inline-block",style:{backgroundImage:"url("+t.contact.contact_user.profile_image+")"}},[t.contact.contact_user.profile_image?t._e():s("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.contact.contact_user.initials)+"\n\t\t\t\t\t\t\t\t\t")])]),t._v(" "),s("h1",{staticClass:"h3 font-heading mt-2 mb-0"},[t._v(t._s(t.contact.contact_user.full_name))]),t._v(" "),s("div",{staticClass:"text-muted mb-1"},[t._v(t._s(t.contact.contact_user.email))])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between mt-4"},[s("div",[s("div",{staticClass:"text-gray mb-1"},[t._v("Status")]),t._v(" "),s("div",[s("div",{staticClass:"badge badge-icon d-inline-flex align-items-center",class:[t.contact.is_pending?"bg-warning-light text-warning":"bg-primary-light text-primary"]},[t.contact.is_pending?s("clock-icon",{attrs:{height:"12",width:"12"}}):s("checkmark-circle-icon",{attrs:{height:"12",width:"12"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tÂ "+t._s(t.contact.is_pending?"Pending":"Accepted")+"\n\t\t\t\t\t\t\t\t\t\t")],1)])]),t._v(" "),s("div",[s("div",{staticClass:"text-gray mb-1"},[t._v("Bookings")]),t._v(" "),s("div",[t._v(t._s(t.contact.bookings.total))])]),t._v(" "),s("div",[s("div",{staticClass:"text-gray mb-1"},[t._v("Date Added")]),t._v(" "),s("div",[t._v(t._s(t.formatDate(t.contact.created_at)))])])])]),t._v(" "),s("div",{staticClass:"rounded bg-white shadow-sm p-3 mb-4"},[s("h5",{staticClass:"font-heading mb-0"},[t._v("Fields")]),t._v(" "),t._l(t.contact.custom_fields,(function(e,a){return s("div",{key:a,staticClass:"d-flex align-items-center custom-field position-relative"},[s("div",{staticClass:"mt-3 d-flex align-items-center w-100"},[s("span",{staticClass:"text-muted"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"ml-auto d-flex align-items-center"},[s("span",[t._v(t._s(e.value))]),t._v(" "),s("trash-icon",{staticClass:"cursor-pointer ml-1 d-none",attrs:{width:"18",height:"18"},nativeOn:{click:function(e){return t.$root.auth.custom_fields.splice(a,1)}}})],1)])])}))],2),t._v(" "),s("div",{staticClass:"rounded bg-white shadow-sm h-100 d-flex flex-column p-3"},[s("h5",{staticClass:"font-heading"},[t._v("Upcoming Bookings")]),t._v(" "),s("div",{staticClass:"flex-grow-1"},[t.contact.upcoming_bookings.length>0?t._l(t.contact.upcoming_bookings,(function(e){return s("div",{key:e.id,staticClass:"mt-3 pb-3 border-bottom"},[s("div",{staticClass:"h6 font-heading mb-0"},[t._v(t._s(e.service.name))]),t._v(" "),s("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.formatDate(e.date))+" "+t._s(t.dayjs(e.start).format("hh:mmA"))+" -\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.dayjs(e.start).add(e.service.duration,"minute").format("hh:mmA"))+"\n\t\t\t\t\t\t\t\t\t\t")])])})):s("div",{staticClass:"py-3 text-center text-gray"},[t._v("No upcoming bookings")])],2)])])]),t._v(" "),s("div",{staticClass:"col-md-7 px-2"},[s("div",{staticClass:"px-1 h-100"},[s("div",{staticClass:"rounded bg-white shadow-sm p-3"},[s("div",{staticClass:"d-flex mb-2"},[s("h5",{staticClass:"font-heading mb-3"},[t._v("Bookings")]),t._v(" "),s("div",{staticClass:"ml-auto d-flex align-items-center"},[s("div",{staticClass:"d-inline-flex align-items-center"},[s("vue-select",{attrs:{options:t.servicesList,multiple:"",button_class:"border-0 bg-light shadow-none",label:"Services",placeholder:"All"},on:{input:t.filterByServices},model:{value:t.filterServices,callback:function(e){t.filterServices=e},expression:"filterServices"}})],1)])]),t._v(" "),t.contact.bookings.data.length>0?s("div",[s("table",{staticClass:"table table-borderless mb-0"},[s("tbody",{staticClass:" shadow-none"},[t._l(t.contact.bookings.data,(function(e){return[s("tr",{key:e.id},[s("td",{staticClass:"align-middle pl-0"},[t._v(t._s(e.service.name))]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.formatDate(e.date))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.convertTime(e.start,"hh:MMA"))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("td",{staticClass:"align-middle pr-0"},[s("div",{staticClass:"flex-grow-1 text-right"},[s("div",{staticClass:"dropleft"},[s("button",{staticClass:"btn btn-white p-1 line-height-0",attrs:{"data-toggle":"dropdown"}},[s("more-icon",{staticClass:"fill-gray-500",attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(s){return t.editBooking(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])]}))],2)])]):s("div",{staticClass:"px-4 mb-4"},[s("div",{staticClass:"rounded bg-white shadow-sm text-center py-3 text-muted"},[t._v("\n\t\t\t\t\t\t\t\t\tNo bookings found.\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),s("div",{staticClass:"mt-3 text-right"},[s("paginate",{attrs:{data:t.contact.bookings},on:{change:t.getData}})],1)])])])])])]):t._e()}),[],!1,null,"20cd71ea",null);e.default=P.exports},O9dX:function(t,e,s){"use strict";s("/yFD")},RrSB:function(t,e,s){"use strict";var a=s("IGiv"),n=s("kdyA"),i={components:{ChevronRightIcon:a.a,ChevronLeftIcon:n.a},props:{data:{type:Object,require:!0}},computed:{pages:function(){for(var t=[],e=1,s=Math.ceil(this.data.total/this.data.per_page);e<=s;)t.push(e),e++;return t}},methods:{goToPage:function(t){if(t){t=new URL(t);var e=new URLSearchParams(t.search).get("page");this.change(e)}},change:function(t){this.$emit("change",t)}}},o=(s("O9dX"),s("KHd+")),c=Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data?s("div",[s("ul",{staticClass:"pagination shadow-sm mb-0 d-inline-flex"},[s("li",{staticClass:"page-item",class:{disabled:!t.data.prev_page_url},on:{click:function(e){return t.goToPage(t.data.prev_page_url)}}},[s("span",{staticClass:"page-link cursor-pointer"},[s("chevron-left-icon",{attrs:{width:"10",height:"10",transform:"scale(3.0)"}})],1)]),t._v(" "),t._l(t.pages,(function(e){return s("li",{key:e,staticClass:"page-item",class:{active:e==t.data.current_page},on:{click:function(s){return t.change(e)}}},[s("span",{staticClass:"page-link cursor-pointer"},[t._v(t._s(e))])])})),t._v(" "),s("li",{staticClass:"page-item",class:{disabled:!t.data.next_page_url},on:{click:function(e){return t.goToPage(t.data.next_page_url)}}},[s("span",{staticClass:"page-link cursor-pointer"},[s("chevron-right-icon",{attrs:{width:"10",height:"10",transform:"scale(3.0)"}})],1)])],2)]):t._e()])}),[],!1,null,"f7e753c0",null);e.a=c.exports},YxwZ:function(t,e,s){var a=s("lPt7");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(t.exports=a.locals)},b466:function(t,e,s){(e=s("JPst")(!1)).push([t.i,".info[data-v-0bcf802b]{transition:all .1s ease-in-out;width:350px;margin-right:-350px}.info.open[data-v-0bcf802b]{margin-right:0}.user-profile-image-sm[data-v-0bcf802b]{width:40px;height:40px}.user-profile-image-sm span[data-v-0bcf802b]{font-size:13px}.contact.active[data-v-0bcf802b]{box-shadow:0 0 0 .1rem #5a5adf}.w-35[data-v-0bcf802b]{width:35% !important}.w-15[data-v-0bcf802b]{width:15% !important}.custom-field .edit-custom-field[data-v-0bcf802b]{opacity:0;transition:all .1s ease-in-out}.custom-field .edit-custom-field[aria-expanded=true][data-v-0bcf802b]{opacity:1}.custom-field:hover .edit-custom-field[data-v-0bcf802b]{opacity:1}.badge-icon svg[data-v-0bcf802b]{transform:scale(1.3);margin-right:2px}.badge-icon.text-primary svg[data-v-0bcf802b]{fill:#5a5adf}.badge-icon.text-warning svg[data-v-0bcf802b]{fill:#ffc107}.btn-close[data-v-0bcf802b]{top:10px;right:10px}",""]),t.exports=e},d1mH:function(t,e,s){"use strict";s("gSal")},dNBw:function(t,e,s){(e=s("JPst")(!1)).push([t.i,".page-item.disabled svg[data-v-f7e753c0]{opacity:.25}",""]),t.exports=e},eeqt:function(t,e,s){"use strict";var a={name:"arrow-left"},n=s("KHd+"),i=Object(n.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8.70710678,12 L18.5,12 C18.7761424,12 19,12.2238576 19,12.5 C19,12.7761424 18.7761424,13 18.5,13 L8.70710678,13 L11.8535534,16.1464466 C12.0488155,16.3417088 12.0488155,16.6582912 11.8535534,16.8535534 C11.6582912,17.0488155 11.3417088,17.0488155 11.1464466,16.8535534 L7.14644661,12.8535534 C6.95118446,12.6582912 6.95118446,12.3417088 7.14644661,12.1464466 L11.1464466,8.14644661 C11.3417088,7.95118446 11.6582912,7.95118446 11.8535534,8.14644661 C12.0488155,8.34170876 12.0488155,8.65829124 11.8535534,8.85355339 L8.70710678,12 Z"}})])}),[],!1,null,null,null);e.a=i.exports},gSal:function(t,e,s){var a=s("b466");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(t.exports=a.locals)},hlRI:function(t,e,s){"use strict";s.r(e);var a=s("L2JU"),n=s("jBWl"),i=s("MCve"),o=s("4m4z"),c=s("T1qZ"),r=s("5cWj"),l=s("lIWo"),d=s("dRai"),u=s("cmxz"),v=s("grtR"),f=s("NalG"),m=s("XPXJ"),h=s("KlRW"),p=s("/X8E");function g(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function _(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?g(Object(s),!0).forEach((function(e){b(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function b(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var C={components:{Modal:n.a,VueFormValidate:i.a,VueCheckbox:o.a,VueButton:c.a,ToggleSwitch:r.a,Info:l.default,MoreIcon:d.a,PlusIcon:u.a,TrashIcon:v.a,PencilIcon:f.a,ClockIcon:m.a,CheckmarkCircleIcon:h.a,CloseIcon:p.a,gallery:function(){return s.e(26).then(s.bind(null,"kMA9"))}},data:function(){return{infoTab:"",selectedContact:null,manageContact:!1,manageFields:!1,addContact:!1,newContact:{custom_fields:{},blacklisted_services:[],sendToEmail:1},activeTab:"custom_fields",selectedFile:null,addField:!1,newField:"",resendLoading:!1}},computed:_(_({},Object(a.d)({conversations:function(t){return t.conversations.index},contacts:function(t){return t.contacts.index},ready:function(t){return t.contacts.ready},services:function(t){return t.services.index},user_blacklisted_services:function(t){return t.user_blacklisted_services.index}})),{},{defaultEmailMessage:function(){return"".concat(this.$root.auth.full_name," has invited you in ").concat(APP_NAME)},blacklisted_services:function(){return this.user_blacklisted_services[(this.selectedContact.contact_user||{}).id]||[]},conversation:function(){var t=this;if(!this.selectedContact)return{};var e=this.conversations.find((function(e){return 1==e.members.length&&e.member.id==t.selectedContact.contact_user.id}));return e?this.selectedContact.ready||this.showConversation({id:e.id}).then((function(){e.files=null,t.$root.getFiles(e)})):(this.$root.auth.services=this.services,e={ready:!0,member:this.selectedContact.contact_user,members:[this.selectedContact.contact_user],user:this.$root.auth,user_id:this.$root.auth.id}),e.member.contact=this.selectedContact,this.selectedContact.ready=!0,e}}),watch:{ready:function(t){this.$root.contentloading=!t}},created:function(){var t=this;this.$root.contentloading=!this.ready,this.getServices(),this.getContacts(),this.showUserCustomFields(),this.$root.socket.on("invite_token",(function(e){e&&t.getContactFromInviteToken(e)}))},mounted:function(){var t=this;this.$root.intros.contacts.enabled&&setTimeout((function(){document.querySelector(".introjs-overlay")||t.$root.intros.contacts.intro.start()}),500)},methods:_(_({},Object(a.b)({getServices:"services/index",getContacts:"contacts/index",storeContact:"contacts/store",deleteContact:"contacts/delete",getContactFromInviteToken:"contacts/get_contact_from_invite_token",showUserCustomFields:"user_custom_fields/show",storeUserCustomFields:"user_custom_fields/store",showConversation:"conversations/show"})),{},{goToContact:function(t){this.$router.push("/dashboard/contacts/".concat(t.id))},resendEmail:function(t){var e=this;this.resendLoading=!0,axios.post("/contacts/".concat(t.id,"/resend")).then((function(){e.resendLoading=!1,e.$refs.resendModal.hide(),e.$toasted.show("Invitation email has been sent successfully.")}))},toggleServiceBlacklist:function(t){var e=this.newContact.blacklisted_services.findIndex((function(e){return e==t.id}));e>-1?this.newContact.blacklisted_services.splice(e,1):this.newContact.blacklisted_services.push(t.id)},openFile:function(t){"file"==t.type?this.$root.downloadMedia(t):this.selectedFile=t},resetNewContact:function(){this.newContact={custom_fields:{},blacklisted_services:[]}},addNewField:function(){this.newField.trim().length>0&&(this.$root.auth.custom_fields.push(this.newField),this.newField="",this.addField=!1),this.storeUserCustomFields(),this.$toasted.show("Fields saved successfully.")},updateCustomField:function(t){this.$root.auth.custom_fields[t]=this.editCustomField,this.storeUserCustomFields(),this.$refs.customFieldsLabel.click()},store:function(){var t=this;this.newContact.email&&(this.storeContact(this.newContact).then((function(){t.newContact={custom_fields:{},blacklisted_services:[],sendToEmail:1}})),this.infoTab="")}})},w=(s("d1mH"),s("KHd+")),x=Object(w.a)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.ready?s("div",{staticClass:"h-100"},[s("div",{staticClass:"d-flex h-100"},[s("div",{staticClass:"h-100 flex-grow-1"},[s("div",{staticClass:"d-flex flex-column h-100"},[s("div",{staticClass:"border-bottom bg-white p-3 d-flex align-items-center"},[s("h5",{staticClass:"font-heading mb-0"},[t._v("Contacts")]),t._v(" "),s("div",{staticClass:"ml-auto d-flex align-items-center"},[s("button",{staticClass:"btn btn-light shadow-none d-flex align-items-center",attrs:{"data-intro":t.$root.intros.contacts.steps[0],"data-step":"1",type:"button"},on:{click:function(e){t.infoTab="add_contact"}}},[s("plus-icon",{staticClass:"btn-icon"}),t._v("\n\t\t\t\t\t\t\tAdd Contact\n\t\t\t\t\t\t")],1),t._v(" "),s("button",{staticClass:"btn btn-light ml-1 shadow-none",attrs:{"data-intro":t.$root.intros.contacts.steps[1],"data-step":"2",type:"button"},on:{click:function(e){t.infoTab="manage_fields"}}},[t._v("Manage Fields")])])]),t._v(" "),s("div",{staticClass:"rounded mt-2 overflow-auto h-100 flex-grow-1 d-flex flex-column"},[0==t.contacts.length?s("div",{staticClass:"text-secondary text-center p-4 position-absolute-center"},[s("div",{staticClass:"h6 mb-0 font-weight-normal"},[t._v("You don't have any contacts yet.")])]):s("div",{staticClass:"overflow-auto flex-grow-1 pb-4 px-4 h-100"},[s("table",{staticClass:"table table-borderless table-hover mb-0"},[t._m(0),t._v(" "),s("tbody",t._l(t.contacts,(function(e,a){return s("tr",{key:e.id,staticClass:"cursor-pointer"},[s("td",{staticClass:"align-middle",on:{click:function(s){return t.goToContact(e)}}},[s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticClass:"user-profile-image user-profile-image-sm",style:{backgroundImage:"url("+e.contact_user.profile_image+")"}},[e.contact_user.profile_image?t._e():s("span",[t._v(t._s(e.contact_user.initials))])]),t._v(" "),s("div",{staticClass:"ml-2 overflow-hidden flex-1"},[s("h6",{staticClass:"font-heading mb-0 text-ellipsis"},[t._v(t._s(e.contact_user.full_name))]),t._v(" "),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(e.contact_user.email))])])])]),t._v(" "),s("td",{staticClass:"align-middle",on:{click:function(s){return t.goToContact(e)}}},[s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"badge badge-icon d-inline-flex align-items-center",class:[e.is_pending?"bg-warning-light text-warning":"bg-primary-light text-primary"]},[e.is_pending?s("clock-icon",{attrs:{height:"12",width:"12"}}):s("checkmark-circle-icon",{attrs:{height:"12",width:"12"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tÂ "+t._s(e.is_pending?"Pending":"Accepted")+"\n\t\t\t\t\t\t\t\t\t\t\t")],1)])]),t._v(" "),s("td",{staticClass:"align-middle",on:{click:function(s){return t.goToContact(e)}}},[s("div",{staticClass:"flex-grow-1 text-muted"},[t._v(t._s(e.created_at_format))])]),t._v(" "),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"flex-grow-1 text-right"},[s("div",{staticClass:"dropleft"},[s("button",{staticClass:"btn btn-white p-1 line-height-0",attrs:{"data-intro":0==a?t.$root.intros.contacts.steps[2]:null,"data-step":0==a?3:null,"data-toggle":"dropdown"}},[s("more-icon",{staticClass:"fill-gray-500",attrs:{width:"20",height:"20",transform:"scale(0.75)"}})],1),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e.is_pending?s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(s){t.selectedContact=e,t.$refs.resendModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tResend invitation\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),s("span",{staticClass:"dropdown-item cursor-pointer",on:{click:function(s){t.selectedContact=e,t.$refs.deleteModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])})),0)])])])])]),t._v(" "),s("div",{staticClass:"info bg-white h-100 border-left d-flex flex-column position-relative",class:{open:t.infoTab}},[s("button",{staticClass:"btn btn-white p-0 btn-close position-absolute",attrs:{type:"button"},on:{click:function(e){t.infoTab=""}}},[s("close-icon",{attrs:{height:"30",width:"30"}})],1),t._v(" "),"manage_contact"==t.infoTab?[t._m(1),t._v(" "),t.selectedContact?[s("info",{attrs:{"close-button":!1,conversation:t.conversation}})]:t._e()]:"manage_fields"==t.infoTab?[t._m(2),t._v(" "),s("div",{ref:"customFieldsLabel",staticClass:"p-3"},[t._l(t.$root.auth.custom_fields,(function(e,a){return s("div",{key:a,staticClass:"d-flex align-items-center custom-field position-relative"},[s("div",{staticClass:"mb-1 d-flex align-items-center w-100"},[s("input",{staticClass:"form-control flex-grow-1",attrs:{type:"text"},domProps:{value:e}}),t._v(" "),s("trash-icon",{staticClass:"cursor-pointer ml-1",attrs:{width:"18",height:"18"},nativeOn:{click:function(e){return t.$root.auth.custom_fields.splice(a,1)}}})],1)])})),t._v(" "),s("div",{staticClass:"mb-1 d-flex align-items-center w-100"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newField,expression:"newField"}],staticClass:"form-control flex-grow-1",attrs:{type:"text",placeholder:"New Field"},domProps:{value:t.newField},on:{input:function(e){e.target.composing||(t.newField=e.target.value)}}}),t._v(" "),s("trash-icon",{staticClass:"ml-1 opacity-0",attrs:{width:"18",height:"18"}})],1),t._v(" "),s("div",{staticClass:"d-flex mt-1"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.addField},on:{click:function(e){return t.addNewField()}}},[t._v("Save")])])],2)]:"add_contact"==t.infoTab?s("div",{staticClass:"d-flex flex-column overflow-hidden"},[t._m(3),t._v(" "),s("div",{staticClass:"p-4 overflow-auto flex-grow-1"},[s("vue-form-validate",{on:{submit:t.store}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.email,expression:"newContact.email"}],staticClass:"form-control",attrs:{type:"email","data-required":""},domProps:{value:t.newContact.email},on:{input:function(e){e.target.composing||t.$set(t.newContact,"email",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-row form-group"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label"},[t._v("First Name (Optional)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.first_name,expression:"newContact.first_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.first_name},on:{input:function(e){e.target.composing||t.$set(t.newContact,"first_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col"},[s("label",{staticClass:"form-label"},[t._v("Last Name (Optional)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.last_name,expression:"newContact.last_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.last_name},on:{input:function(e){e.target.composing||t.$set(t.newContact,"last_name",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("strong",{staticClass:"d-block mb-2 font-weight-bold"},[t._v("Available services")]),t._v(" "),t._l(t.services,(function(e){return s("div",{key:e.id,staticClass:"d-flex align-items-center mb-2 rounded p-3 bg-light"},[s("div",[s("h6",{staticClass:"font-heading mb-0"},[t._v(t._s(e.name))]),t._v(" "),s("small",{staticClass:"text-gray d-block"},[t._v(t._s(e.duration)+" minutes")])]),t._v(" "),s("div",{staticClass:"ml-auto"},[s("toggle-switch",{attrs:{"active-class":"bg-green",value:!t.newContact.blacklisted_services.find((function(t){return t==e.id}))},on:{input:function(s){return t.toggleServiceBlacklist(e)}}})],1)])}))],2),t._v(" "),(t.$root.auth.custom_fields||[]).length>0?s("div",{staticClass:"form-group"},[s("strong",{staticClass:"d-block mb-2"},[t._v("Fields (Optional)")]),t._v(" "),s("div",{staticClass:"form-row"},t._l(t.$root.auth.custom_fields,(function(e){return s("div",{key:e,staticClass:"col-6 mb-2"},[s("label",{staticClass:"form-label"},[t._v(t._s(e))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newContact.custom_fields[e],expression:"newContact.custom_fields[field]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newContact.custom_fields[e]},on:{input:function(s){s.target.composing||t.$set(t.newContact.custom_fields,e,s.target.value)}}})])})),0)]):t._e(),t._v(" "),s("div",{staticClass:"form-group"},[s("strong",{staticClass:"d-block mb-2"},[t._v("Invitation Message (Optional)")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newContact.invite_message,expression:"newContact.invite_message"}],staticClass:"form-control resize-none",attrs:{cols:"10",placeholder:t.defaultEmailMessage},domProps:{value:t.newContact.invite_message},on:{input:function(e){e.target.composing||t.$set(t.newContact,"invite_message",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("vue-checkbox",{attrs:{label:"Send invitation link to email"},model:{value:t.newContact.sendToEmail,callback:function(e){t.$set(t.newContact,"sendToEmail",e)},expression:"newContact.sendToEmail"}})],1),t._v(" "),s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-white border",attrs:{type:"button"},on:{click:function(e){t.infoTab=""}}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"ml-auto btn btn-primary",attrs:{type:"submit"}},[t._v("Add")])])])],1)]):t._e()],2)]),t._v(" "),s("modal",{ref:"resendModal",attrs:{"close-button":!1}},[t.selectedContact?[s("h5",{staticClass:"font-heading text-center"},[t._v("Resend Invitation")]),t._v(" "),s("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\tAre you sure to resend the invitation email to contact\n\t\t\t\t"),s("strong",[t._v(t._s(t.selectedContact.contact_user.full_name.trim()||t.selectedContact.contact_user.email))]),t._v("\n\t\t\t\t?\n\t\t\t\t"),s("br")]),t._v(" "),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-light shadow-none text-body",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("vue-button",{attrs:{button_class:"btn btn-primary ml-auto",loading:t.resendLoading,type:"button"},on:{click:function(e){return t.resendEmail(t.selectedContact)}}},[t._v("Resend Invitation")])],1)]:t._e()],2),t._v(" "),s("modal",{ref:"deleteModal",attrs:{"close-button":!1}},[t.selectedContact?[s("h5",{staticClass:"font-heading text-center"},[t._v("Delete Contact")]),t._v(" "),s("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\tAre you sure to delete contact\n\t\t\t\t"),s("strong",[t._v(t._s(t.selectedContact.contact_user.full_name.trim()||t.selectedContact.contact_user.email))]),t._v("\n\t\t\t\t?\n\t\t\t\t"),s("br"),t._v(" "),s("span",{staticClass:"text-danger"},[t._v("This action cannot be undone")])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-light shadow-none text-body",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-danger ml-auto",attrs:{type:"button"},on:{click:function(e){t.deleteContact(t.selectedContact),t.$refs.deleteModal.hide()}}},[t._v("\n\t\t\t\t\tDelete\n\t\t\t\t")])])]:t._e()],2),t._v(" "),s("gallery",{attrs:{conversation:t.conversation,file:t.selectedFile},on:{close:function(e){t.selectedFile=null}}})],1):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Status")]),this._v(" "),e("th",[this._v("Date Added")]),this._v(" "),e("th")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Manage Contact")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Manage Fields")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-bottom py-3 px-3"},[e("strong",{staticClass:"d-block my-2"},[this._v("Add Contact")])])}],!1,null,"0bcf802b",null);e.default=x.exports},i93w:function(t,e,s){t.exports=function(){"use strict";return function(t,e){e.prototype.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)}}}()},lPt7:function(t,e,s){(e=s("JPst")(!1)).push([t.i,".info[data-v-20cd71ea]{transition:all .1s ease-in-out;width:350px;margin-right:-350px}.info.open[data-v-20cd71ea]{margin-right:0}.user-profile-image[data-v-20cd71ea]{width:100px;height:100px}.user-profile-image span[data-v-20cd71ea]{font-size:35px}.user-profile-image-sm[data-v-20cd71ea]{width:40px;height:40px}.user-profile-image-sm span[data-v-20cd71ea]{font-size:13px}.contact.active[data-v-20cd71ea]{box-shadow:0 0 0 .1rem #5a5adf}.w-35[data-v-20cd71ea]{width:35% !important}.w-15[data-v-20cd71ea]{width:15% !important}.custom-field .edit-custom-field[data-v-20cd71ea]{opacity:0;transition:all .1s ease-in-out}.custom-field .edit-custom-field[aria-expanded=true][data-v-20cd71ea]{opacity:1}.custom-field:hover .edit-custom-field[data-v-20cd71ea]{opacity:1}.badge-icon svg[data-v-20cd71ea]{transform:scale(1.3);margin-right:2px}.badge-icon.text-primary svg[data-v-20cd71ea]{fill:#5a5adf}.badge-icon.text-warning svg[data-v-20cd71ea]{fill:#ffc107}.btn-close[data-v-20cd71ea]{top:10px;right:10px}",""]),t.exports=e},oG9G:function(t,e,s){"use strict";s("YxwZ")},s3Wo:function(t,e,s){t.exports=function(){"use strict";return function(t,e){e.prototype.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)}}}()}}]);