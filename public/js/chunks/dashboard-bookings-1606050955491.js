(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"375c":function(t,e,s){"use strict";var i={name:"more-h"},n=s("KHd+"),a=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M 6 10 A 2 2 0 0 0 4 12 A 2 2 0 0 0 6 14 A 2 2 0 0 0 8 12 A 2 2 0 0 0 6 10 z M 12 10 A 2 2 0 0 0 10 12 A 2 2 0 0 0 12 14 A 2 2 0 0 0 14 12 A 2 2 0 0 0 12 10 z M 18 10 A 2 2 0 0 0 16 12 A 2 2 0 0 0 18 14 A 2 2 0 0 0 20 12 A 2 2 0 0 0 18 10 z"}})])}),[],!1,null,null,null);e.a=a.exports},A2bC:function(t,e,s){"use strict";s("sPWh")},bcHF:function(t,e,s){"use strict";s.r(e);var i,n=s("Wgwc"),a=s.n(n),o=s("WIcW"),r=s.n(o),l=s("L2JU"),c=s("jBWl"),d=s("MCve"),u=s("375c");function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function h(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(Object(s),!0).forEach((function(e){b(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function b(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var f={components:{VCalendar:r.a,Modal:c.a,VueFormValidate:d.a,MoreHIcon:u.a},data:function(){return{selectedBooking:null,selectedDate:null,selectedTimeslot:null,selectAttribute:{highlight:{fillMode:"solid",contentClass:"bg-primary"}},days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],step:1,error:""}},computed:h(h({},Object(l.d)({ready:function(t){return t.bookings.ready},bookings:function(t){return t.bookings.index}})),{},{formattedHolidays:function(){var t=this,e=[];if(this.selectedBooking.service){this.selectedBooking.service.holidays.forEach((function(t){var s=t.split("-"),i=new Date(s[0],s[1]-1,s[2]);e.push(i)}));var s=[];this.days.forEach((function(e,i){i++,t.selectedBooking.service.days[e].isOpen||s.push(i)})),s.length>0&&e.push({weekdays:s})}return e},nextDisabled:function(){var t=!0;switch(this.step){case 1:this.selectedDate&&(t=!1);break;case 2:this.selectedTimeslot&&(t=!1)}return t},buttonText:function(){var t="Next";switch(this.step){case 1:t="Select time";break;case 2:t="Update"}return t}}),watch:{ready:function(t){this.$root.contentloading=!t},selectedDate:function(t){t&&(this.error=null),this.getTimeslots()}},created:function(){this.$root.contentloading=!this.ready,this.getBookings()},methods:h(h({},Object(l.b)({getBookings:"bookings/index",updateBooking:"bookings/update"})),{},(i={resetStep:function(){this.step=1,this.selectedTimeslot=this.selectedDate=null},update:function(t){var e=this;if(t){var s=JSON.parse(JSON.stringify(t));s.date=a()(this.selectedDate).format("YYYY-MM-DD"),s.start=this.selectedTimeslot.time,this.updateBooking(s).then((function(){e.$refs.editModal.hide()})).catch((function(t){e.error=t.response.data.message,e.resetStep()}))}},formatDate:function(t){var e="";return t&&(e=a()(t).format("MMMM DD, YYYY")),e},nextStep:function(){this.nextDisabled||this.step++},edit:function(t){if(t){var e=t.date.split("-"),s=new Date(e[0],e[1]-1,e[2]);this.selectedBooking=t,this.selectedDate=s,this.$refs.editModal.show()}},getTimeslots:function(){var t=this;if(this.selectedBooking&&this.selectedDate){this.selectedTimeslot=null;var e=a()(this.selectedDate).format("YYYY-MM-DD");axios.get("/@".concat(this.selectedBooking.service.user.username,"/").concat(this.selectedBooking.service.id,"/timeslots?date=").concat(e)).then((function(s){var i=s.data;if(t.selectedBooking.date==e){var n=t.selectedBooking.start.split(":"),o={label:a()().hour(n[0]).minute(n[1]).format("hh:mmA"),time:t.selectedBooking.start};6==o.label.length&&(o.label="0".concat(o.label)),t.selectedTimeslot=o,i.push(o)}i=i.sort((function(t,e){return t.time>e.time?1:-1})),t.$set(t.selectedBooking.service,"timeslots",i)}))}}},b(i,"formatDate",(function(t){return a()(t).format("MMMM D, YYYY")})),b(i,"formatTime",(function(t){var e=t.split(":");return a()().set("hour",e[0]).set("minute",e[1]).format("hh:mmA")})),b(i,"destroy",(function(t){t&&(this.$refs.deleteModal.hide(),axios.delete("/dashboard/bookings/".concat(t.id)),this.$delete(this.bookings,this.bookings.findIndex((function(e){return e.id==t.id}))))})),i))},m=(s("A2bC"),s("KHd+")),p=Object(m.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100"},["customer"==t.$root.auth.role.role?s("div",{staticClass:"p-4"},[t.ready?s("div",[0==t.bookings.length?s("h6",{staticClass:"text-center text-gray position-absolute-center font-weight-lighter"},[t._v("\n\t\t\t\tYou don't have any bookings yet.\n\t\t\t")]):s("div",[s("h1",{staticClass:"font-heading h3 mb-3"},[t._v("Bookings")]),t._v(" "),s("table",{staticClass:"table table-borderless table-fixed-header mb-0"},[t._m(0),t._v(" "),s("tbody",t._l(t.bookings,(function(e){return s("tr",{key:e.vue},[s("td",{staticClass:"align-middle"},[s("strong",{staticClass:"d-block"},[t._v(t._s(e.service.name))]),t._v(" "),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(e.service.user.full_name))])]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v(t._s(t.formatDate(e.date)))]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v(t._s(t.formatTime(e.start)))]),t._v(" "),s("td",{staticClass:"align-middle"},[t._v(t._s(t.formatTime(e.end)))]),t._v(" "),s("td",{staticClass:"text-right align-middle",staticStyle:{width:"50px"}},[s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn-white border p-1 line-height-0",attrs:{"data-toggle":"dropdown"}},[s("more-h-icon",{attrs:{width:"20",height:"20"}})],1),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[s("span",{staticClass:"dropdown-item d-flex align-items-center cursor-pointer",on:{click:function(s){return t.edit(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("span",{staticClass:"dropdown-item d-flex align-items-center cursor-pointer",on:{click:function(s){t.selectedBooking=e,t.$refs.deleteModal.show()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t")])])])])])})),0)])]),t._v(" "),s("modal",{ref:"editModal",on:{hidden:t.resetStep}},[t.selectedBooking?[s("h5",{staticClass:"font-heading"},[t._v("Edit Booking")]),t._v(" "),s("strong",{staticClass:"d-block"},[t._v(t._s(t.selectedBooking.service.name))]),t._v(" "),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(t.selectedBooking.service.user.full_name))]),t._v(" "),s("div",{staticClass:"mb-2 mt-4"},[t.error?s("div",{staticClass:"text-danger"},[t._v(t._s(t.error))]):[t.selectedDate?[s("strong",[t._v(t._s(t.formatDate(t.selectedDate)))]),t._v(" "),t.selectedTimeslot?s("span",[t._v("@"+t._s(t.selectedTimeslot.label))]):t._e()]:s("strong",[t._v("Select Date")])]],2),t._v(" "),s("vue-form-validate",{on:{submit:function(e){return t.update(t.selectedBooking)}}},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"rounded border h-100 mb-3 overflow-hidden"},[1==t.step?s("div",[s("v-date-picker",{staticClass:"v-calendar border-0",attrs:{"select-attribute":t.selectAttribute,"disabled-dates":t.formattedHolidays,"is-required":"","is-expanded":"","is-inline":"","min-date":new Date,"title-position":"left"},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1):2==t.step?s("div",{staticClass:"position-relative h-100 bg-light"},[0==(t.selectedBooking.service.timeslots||[]).length?s("div",{staticClass:"text-gray text-center position-absolute-center w-100"},[t._v("\n\t\t\t\t\t\t\t\t\t\tThere are no timeslots available for the selected date\n\t\t\t\t\t\t\t\t\t")]):s("div",{staticClass:"d-flex flex-wrap pb-2 pr-2"},t._l(t.selectedBooking.service.timeslots,(function(e){return s("div",{staticClass:"pt-2 pl-2 w-20"},[s("div",{staticClass:"btn btn-white border btn-block btn-timeslot px-0 text-center",class:{"bg-primary text-white":e==t.selectedTimeslot},on:{click:function(s){t.selectedTimeslot=e}}},[t._v(t._s(e.label))])])})),0)]):t._e()])]),t._v(" "),s("div",{staticClass:"d-flex mt-3"},[t.step>1?s("button",{staticClass:"btn btn-white border",attrs:{type:"button"},on:{click:function(e){t.step--}}},[t._v("Previous")]):t._e(),t._v(" "),1==t.step?s("button",{staticClass:"btn btn-primary ml-auto",attrs:{type:"button",disabled:t.nextDisabled},on:{click:function(e){return e.preventDefault(),t.nextStep()}}},[t._v("Select time")]):2==t.step?s("button",{staticClass:"btn btn-primary ml-auto",attrs:{type:"submit",disabled:t.nextDisabled}},[t._v("Update")]):t._e()])])]:t._e()],2),t._v(" "),s("modal",{ref:"deleteModal",attrs:{"close-button":!1}},[t.selectedBooking?[s("h5",{staticClass:"font-heading text-center"},[t._v("Delete Booking")]),t._v(" "),s("p",{staticClass:"text-center mt-3"},[t._v("\n\t\t\t\t\t\tAre you sure to delete the booking "),s("strong",[t._v(t._s(t.selectedBooking.service.name))]),t._v("? "),s("br"),t._v(" "),s("span",{staticClass:"text-danger"},[t._v("This action cannot be undone")])]),t._v(" "),s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-white border",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-danger ml-auto",attrs:{type:"button"},on:{click:function(e){return t.destroy(t.selectedBooking)}}},[t._v("Delete")])])]:t._e()],2)],1):t._e()]):s("router-view")],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"border-0"},[t._v("Service")]),t._v(" "),s("th",{staticClass:"border-0"},[t._v("Date")]),t._v(" "),s("th",{staticClass:"border-0"},[t._v("Start")]),t._v(" "),s("th",{staticClass:"border-0"},[t._v("End")]),t._v(" "),s("th",{staticClass:"border-0"})])])}],!1,null,null,null);e.default=p.exports},klEr:function(t,e,s){(e=s("JPst")(!1)).push([t.i,'.v-calendar .vc-title{font-family:"Avenir Next";font-size:18px}.v-calendar .vc-day-content{line-height:1}.form-body{height:270px}.w-20{width:20% !important}',""]),t.exports=e},sPWh:function(t,e,s){var i=s("klEr");"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(i,n);i.locals&&(t.exports=i.locals)}}]);